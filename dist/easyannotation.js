!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).easyannotation={})}(this,(function(t){"use strict";var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,r)};function r(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function n(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}var i,o,a,l=function(){},s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enabled=!0,e}return r(e,t),e.prototype.setEnabled=function(t){t!=this.enabled&&(this.enabled=t,t?this.element.classList.remove("btn-disabled"):this.element.classList.add("btn-disabled"))},e}(l),c=function(t){function e(){var e=t.call(this)||this;return e.pushed=!1,e.iconSVG="",e}return r(e,t),e.prototype.setPushed=function(t){this.pushed=t},e}(s),d=function(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},p=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],u=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],h=function(){function t(){}return t.blurData=function(t,e){!function(t,e){var r,n,i,o,a,l,s,c,h,g,f,m,v,y,w,b,x,S,E,k,A,L,C,D,M=t.data,T=t.width,N=t.height,I=e+e+1,O=T-1,R=N-1,z=e+1,B=z*(z+1)/2,V=new d,P=null,H=V,G=null,F=null,_=p[e],X=u[e];for(i=1;i<I;i++)H=H.next=new d,i===z&&(P=H);for(H.next=V,s=l=0,n=0;n<N;n++){for(b=x=S=E=c=h=g=f=0,m=z*(k=M[l]),v=z*(A=M[l+1]),y=z*(L=M[l+2]),w=z*(C=M[l+3]),c+=B*k,h+=B*A,g+=B*L,f+=B*C,H=V,i=0;i<z;i++)H.r=k,H.g=A,H.b=L,H.a=C,H=H.next;for(i=1;i<z;i++)o=l+((O<i?O:i)<<2),c+=(H.r=k=M[o])*(D=z-i),h+=(H.g=A=M[o+1])*D,g+=(H.b=L=M[o+2])*D,f+=(H.a=C=M[o+3])*D,b+=k,x+=A,S+=L,E+=C,H=H.next;for(G=V,F=P,r=0;r<T;r++)M[l+3]=C=f*_>>X,0!==C?(C=255/C,M[l]=(c*_>>X)*C,M[l+1]=(h*_>>X)*C,M[l+2]=(g*_>>X)*C):M[l]=M[l+1]=M[l+2]=0,c-=m,h-=v,g-=y,f-=w,m-=G.r,v-=G.g,y-=G.b,w-=G.a,o=s+((o=r+e+1)<O?o:O)<<2,c+=b+=G.r=M[o],h+=x+=G.g=M[o+1],g+=S+=G.b=M[o+2],f+=E+=G.a=M[o+3],G=G.next,m+=k=F.r,v+=A=F.g,y+=L=F.b,w+=C=F.a,b-=k,x-=A,S-=L,E-=C,F=F.next,l+=4;s+=T}for(r=0;r<T;r++){for(x=S=E=b=h=g=f=c=0,m=z*(k=M[l=r<<2]),v=z*(A=M[l+1]),y=z*(L=M[l+2]),w=z*(C=M[l+3]),c+=B*k,h+=B*A,g+=B*L,f+=B*C,H=V,i=0;i<z;i++)H.r=k,H.g=A,H.b=L,H.a=C,H=H.next;for(a=T,i=1;i<=e;i++)l=a+r<<2,c+=(H.r=k=M[l])*(D=z-i),h+=(H.g=A=M[l+1])*D,g+=(H.b=L=M[l+2])*D,f+=(H.a=C=M[l+3])*D,b+=k,x+=A,S+=L,E+=C,H=H.next,i<R&&(a+=T);for(l=r,G=V,F=P,n=0;n<N;n++)M[3+(o=l<<2)]=C=f*_>>X,C>0?(C=255/C,M[o]=(c*_>>X)*C,M[o+1]=(h*_>>X)*C,M[o+2]=(g*_>>X)*C):M[o]=M[o+1]=M[o+2]=0,c-=m,h-=v,g-=y,f-=w,m-=G.r,v-=G.g,y-=G.b,w-=G.a,o=r+((o=n+z)<R?o:R)*T<<2,c+=b+=G.r=M[o],h+=x+=G.g=M[o+1],g+=S+=G.b=M[o+2],f+=E+=G.a=M[o+3],G=G.next,m+=k=F.r,v+=A=F.g,y+=L=F.b,w+=C=F.a,b-=k,x-=A,S-=L,E-=C,F=F.next,l+=T}}(t,e)},t}(),g=function(){function t(){}return t.checkMobile=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&window.innerWidth<=720&&window.innerHeight<=1280&&(e=!0),e},t.isMobileDevice=function(){return this.isMobile},t.isPhone=function(){return this._isMobilePhone},t.isEdge=function(){return this._isEdge},t.getBrowserSpec=function(){var t,e=navigator.userAgent,r=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(r[1])?{name:"IE",version:(t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""}:"Chrome"===r[1]&&null!=(t=e.match(/\b(OPR|Edge)\/(\d+)/))?{name:t[1].replace("OPR","Opera"),version:t[2]}:(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&r.splice(1,1,t[1]),{name:r[0],version:r[1]})},t.fixIOSSlider=function(t){/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(t.addEventListener("touchstart",this.onSliderTouch),t.addEventListener("touchmove",this.onSliderTouch))},t.exportToPNG=function(t,e,r){var n=e.width.baseVal.value,i=e.height.baseVal.value,o=document.createElement("canvas"),a=o.getContext("2d");o.width=n,o.height=i,a.drawImage(t,0,0,n,i);for(var l,s,c=new DOMParser,d=e.outerHTML,p=d.indexOf("<foreignObject");p>=0;)l=d.lastIndexOf("<g",p),s=d.indexOf("</g>",p+20),p=(d=d.substring(0,l)+d.substr(s+4)).indexOf("<foreignObject");var u,g=c.parseFromString(d,"text/xml"),f=g.getElementsByTagName("defs")[0],m=f.getElementsByTagName("pattern"),v=m.length;for(u=0;u<v;u++)if(0===m[u].id.indexOf("mainFillPattern")){f.removeChild(m[u]);break}for(var y=g.getElementsByTagName("svg")[0].firstChild,w=new Array;y;){if("g"==y.nodeName.toLowerCase()){var b=y.firstChild;if("rect"==b.nodeName.toLowerCase()){var x=y.transform.baseVal.getItem(0).matrix,S=x.e,E=x.f,k=b,A=k.getAttribute("filter");if(k.classList.contains("blur-rect")&&A&&A.indexOf("#bluringFilter")>0)for(var L=A.substr(5,A.length-6),C=f.firstChild;C;){if("filter"==C.nodeName.toLowerCase()&&C.id==L){var D=C.firstChild.getAttribute("stdDeviation");w.push({x:k.x.baseVal.value+S,y:k.y.baseVal.value+E,w:k.width.baseVal.value,h:k.height.baseVal.value,b:parseFloat(D)});break}C=C.nextSibling}}}y=y.nextSibling}var M=new Blob([d],{type:"image/svg+xml"}),T=URL.createObjectURL(M),N=new Image;N.onload=function(){var e=document,o=e.createElement("canvas"),a=o.getContext("2d"),l=function(){a.drawImage(N,0,0),URL.revokeObjectURL(T);var t=o.toDataURL("image/png");r(t)},s=function(r,n){var i=e.createElement("canvas"),o=i.getContext("2d"),c=r[n],d=c.w,p=c.h;i.width=d,i.height=p,o.drawImage(t,c.x,c.y,d,p,0,0,d,p);var u=o.getImageData(0,0,d,p);h.blurData(u,Math.floor(2.5*c.b)),o.putImageData(u,0,0);var g=i.toDataURL("image/png"),f=new Image(d,p);f.onload=function(){a.drawImage(f,c.x,c.y),n<r.length-1?s(r,n+1):l()},f.src=g};o.width=n,o.height=i,a.drawImage(t,0,0,n,i),0==w.length?l():s(w,0)},N.src=T},t.on=function(t,e,r){var i,o,a,l,s;s=Array.isArray(t)?t:[t];try{for(var c=n(s),d=c.next();!d.done;d=c.next()){var p=d.value;try{for(var u=(a=void 0,n(e)),h=u.next();!h.done;h=u.next()){var g=h.value;p.addEventListener(g,r,{capture:!1})}}catch(t){a={error:t}}finally{try{h&&!h.done&&(l=u.return)&&l.call(u)}finally{if(a)throw a.error}}}}catch(t){i={error:t}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}},t.un=function(t,e,r){var i,o,a,l,s;s=Array.isArray(t)?t:[t];try{for(var c=n(s),d=c.next();!d.done;d=c.next()){var p=d.value;try{for(var u=(a=void 0,n(e)),h=u.next();!h.done;h=u.next()){var g=h.value;p.removeEventListener(g,r,{capture:!1})}}catch(t){a={error:t}}finally{try{h&&!h.done&&(l=u.return)&&l.call(u)}finally{if(a)throw a.error}}}}catch(t){i={error:t}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}},t.getEvent=function(t){var e=t;return e.touches&&(e=e.touches[0]),e},t.isMobile=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)),t._isMobilePhone=t.checkMobile(),t._isEdge=window.navigator.userAgent.indexOf("Edge")>-1,t.onSliderTouch=function(t){if(t.touches.length){var e=t.target,r=e.getBoundingClientRect(),n=(t.touches[0].screenX-r.left)*parseInt(e.max,10)/r.width;e.value=Math.round(n)+""}},t}(),f=function(){function t(){var t=this;this.height=200,this.orientationChange=function(){var e=t.container,r=window.screen;e.style.height=r.height+"px",e.style.width=r.width+"px"},this.onTouchMove=function(t){t.preventDefault()}}return t.getOpenDialog=function(){return this.openDialog},t.prototype.show=function(e,r,n){t.openDialog=this;var i=e.getBoundingClientRect(),o=this,a=o.container,l=g.isPhone();if(o.callback=n,e.parentElement.appendChild(a),a.style.display="block",l)a.classList.add("ea-mobile-dialog"),a.addEventListener("touchmove",o.onTouchMove),window.addEventListener("orientationchange",o.orientationChange);else{var s=e.parentElement.getBoundingClientRect();a.style.left=i.left-s.left+"px",i.top+o.height>window.innerHeight&&(a.style.top=window.innerHeight-(i.top+o.height)+"px"),a.style.height=o.height+"px"}setTimeout((function(){g.isMobileDevice()?window.addEventListener("touchstart",o.hideDialog):window.addEventListener("click",o.hideDialog)}),500)},t.prototype.hideDialog=function(t){for(var e=t.target,r=this.container;e;){if(e==r)return;var n=e.className;if("string"==typeof n&&n.indexOf("ea-color-picker")>=0)return;e=e.parentElement}this.hide()},t.prototype.hide=function(){t.openDialog=null,g.isMobileDevice()?window.removeEventListener("touchstart",this.hideDialog):window.removeEventListener("click",this.hideDialog),this.container.parentElement.removeChild(this.container)},t.prototype.addBaseButtons=function(t,e,r){var n=document.createElement("div");n.className="btn-container",t.appendChild(n),n.appendChild(e),n.appendChild(r),e.className="button",e.style.marginRight="20px",r.className="button",e.innerHTML="OK",r.innerHTML="Cancel"},t.openDialog=null,t}(),m=function(){function t(t,e,r,i){var o=this;this.showMoreIcons=function(){var t,e,r=o,i=r.submenuContainer;if(!i){(i=document.createElement("div")).classList.add(r.config.ui+"-toolbar-submenu"),r.container.appendChild(i);var a=r.config.ui+"-toolbar-submenu-item";try{for(var l=n(r.submenuItems),s=l.next();!s.done;s=l.next()){var c=s.value;c.element.classList.contains(a)||c.element.classList.add(a),i.appendChild(c.element)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}g.isMobileDevice()?window.addEventListener("touchstart",r.hideSubMenu):window.addEventListener("mousedown",r.hideSubMenu),r.submenuContainer=i}"block"==i.style.display?i.style.display="none":i.style.display="block"},this.hideSubMenu=function(t){var e=o,r=t.target,n=e.submenuContainer;if(n){for(;r;){if(r==n)return;if(!(r instanceof HTMLElement||r instanceof SVGElement))break;r=r.parentElement}n.style.display="none"}};var a=this;a.items=e,a.itemClickHandler=r,a.parent=i,a.config=t,a.init(t)}return t.prototype.init=function(t){var e,r,i=document.createElement("div");i.className=t.ui+"-toolbar",t.toolbarCls&&i.classList.add(t.toolbarCls);try{for(var o=n(this.items),a=o.next();!a.done;a=o.next()){var l=a.value,s=this.getUIElement(t,l);l.element=s,i.appendChild(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}t.targetElement.appendChild(i),this.container=i},t.prototype.getContainer=function(){return this.container},t.prototype.getUIElement=function(t,e){var r=this,n=document.createElement("div");return n.className=t.ui+"-toolbar-item",e.itemId&&(n.id=e.itemId),e.title&&(n.title=e.title),n.onclick=function(t){f.getOpenDialog()&&f.getOpenDialog().hide(),t.stopPropagation(),r.itemClickHandler.call(r.parent,t,e),r.submenuContainer&&(r.submenuContainer.style.display="none")},e.iconSVG?n.innerHTML=e.iconSVG:e.iconURL&&(n.style.backgroundImage=e.iconURL,n.className+=" toolbar-url-icon"),n},t.prototype.deselectAll=function(t){var e,r,i;try{for(var o=n(this.items),a=o.next();!a.done;a=o.next())(i=a.value)!=t&&i instanceof c&&i.setPushed(!1)}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},t.prototype.doLayout=function(){var t,e=this,r=e.items,n=r.length,i=r.length,o=e.container,a=o.getBoundingClientRect().width,l=a/i;for(t=(l=Math.min(30,Math.max(24,l)))*r.length;t>a;)l=a/--i,t=(l=Math.min(30,Math.max(24,l)))*i;if(i<n){e.submenuItems||(e.submenuItems=[]);var s=void 0,c=void 0;for(s=i-2;s<n-1;s++)c=r[s],e.submenuItems.push(c),o.removeChild(c.element);var d=e.showMenuItemsButton;if(null==d){d=document.createElement("div");var p=e.config.ui;d.innerHTML="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 448 512'><path class=\"ea-button\" d='M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34zm192-34l-136-136c-9.4-9.4-24.6-9.4-33.9 0l-22.6 22.6c-9.4 9.4-9.4 24.6 0 33.9l96.4 96.4-96.4 96.4c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l136-136c9.4-9.2 9.4-24.4 0-33.8z'></path></svg>",d.classList.add(p+"-toolbar-item"),d.addEventListener("click",e.showMoreIcons),o.appendChild(d)}}},t}(),v=function(){function t(){}return t.getNextAnnotatorIdx=function(){return this.annotatorIdx++},t.getSVGElement=function(t){var e=document.getElementsByTagName("svg"),r=null,n="easyAnnotatorSVGContainer"+t.annotatorIdx;if(e.length)for(var i=0;i<e.length;i++)if(e[i].id==n){r=e[i];break}return r||(r=document.createElementNS("http://www.w3.org/2000/svg","svg")),r},t.createTransform=function(t){return this.getSVGElement(t).createSVGTransform()},t.getDefs=function(t){var e,r=this.getSVGElement(t),n=r.getElementsByTagName("defs");return 0==n.length?(e=document.createElementNS("http://www.w3.org/2000/svg","defs"),r.appendChild(e)):e=n[0],e},t.addToDefs=function(t,e){var r,n=e.id,i=this.getDefs(t),o=i.getElementsByTagName(e.tagName),a=o.length;for(r=0;r<a;r++)if(o[r].id==n)return;i.appendChild(e)},t.createBlurFilter=function(e,r){var n=document.createElementNS("http://www.w3.org/2000/svg","filter");return n.setAttribute("id","blurFilter_"+e.annotatorIdx+"_"+this.filterIdx++),n.setAttribute("width","200%"),n.setAttribute("height","200%"),n.setAttribute("x","-50%"),n.setAttribute("y","-50%"),n.innerHTML='<feGaussianBlur stdDeviation="'+parseInt(r.value,10)+'"/>',t.addToDefs(e,n),n},t.createShadowFilter=function(e,r,n){var i=document.createElementNS("http://www.w3.org/2000/svg","filter");return i.setAttribute("id","blurFilter_"+e.annotatorIdx+"_"+this.filterIdx++),i.setAttribute("width","200%"),i.setAttribute("height","200%"),i.setAttribute("x","-50%"),i.setAttribute("y","-50%"),this.setShadowFilterValue(i,r,n),t.addToDefs(e,i),i},t.setShadowFilterValue=function(t,e,r){var n=parseInt(e.value,10),i="";r&&(i='<feGaussianBlur in="SourceGraphic" stdDeviation="'+parseInt(r.value,10)+'" result="DROPBLUR"></feGaussianBlur>'),i+='<feGaussianBlur in="SourceGraphic" stdDeviation="'+n+'" result="DROP"></feGaussianBlur>            <feOffset in="SHADOW" result="DROPSHADOW" dx="'+n+'" dy="'+n+'"></feOffset>            <feColorMatrix type="matrix" in="DROPSHADOW" result="FINALSHADOW" values="1 0 0 0 0\t\t\t\t\t  0 1 0 0 0 \t\t\t\t\t  0 0 1 0 0 \t\t\t\t\t  0 0 0 0.7 0">        </feColorMatrix>        <feMerge>            <feMergeNode in="FINALHADOW"></feMergeNode>            <feMergeNode in="'+(r?"DROPBLUR":"SourceGraphic")+'"></feMergeNode>        </feMerge>',t.innerHTML=i},t.createFillPattern=function(t,e,r){var n=this.getDefs(t);if(e>0){if(r)try{r.parentNode==n&&n.removeChild(r)}catch(t){}var i="fillPattern_"+this.annotatorIdx+"_"+this.patternIdx+"_"+e,o=document.createElementNS("http://www.w3.org/2000/svg","pattern");o.id=i,o.setAttribute("patternUnits","userSpaceOnUse"),o.setAttribute("viewBox","0 0 12 20");var a=["M0 20 L12 0","M0 0 L12 20","M6 0 L6 20","M0 10 L12 10","M0 10 L12 10 M6 0 L6 20","M0 20 L12 0 M0 0 L12 20","M0 20 L12 0 M0 0 L12 20","M 5,5 A 1 1 0 1 0 2 5","M 5,5 A 3 3 0 1 0 2 5"];return e<=6?(o.setAttribute("width","12"),o.setAttribute("height","20")):(o.setAttribute("width","10"),o.setAttribute("height","10")),e<=a.length&&(o.innerHTML='<path d="'+a[e-1]+'"/>'),n.appendChild(o),o}},t.createArrowMarker=function(t,e,r,n){var i=document.createElementNS("http://www.w3.org/2000/svg","marker"),o=this.getDefs(t),a=null,l="";switch(r&&o.removeChild(r),i.setAttribute("id","arrowMarker_"+this.annotatorIdx+"_"+this.arrowMarkerIdx++),i.setAttribute("markerWidth","7"),i.setAttribute("markerHeight","8"),i.setAttribute("refX","5"),i.setAttribute("refY","4"),i.setAttribute("orient","auto"),e){case 0:a=document.createElementNS("http://www.w3.org/2000/svg","polygon"),n?a.setAttribute("points","1,4 6,1 6,7"):a.setAttribute("points","0,1 6,4 0,7");break;case 1:a=document.createElementNS("http://www.w3.org/2000/svg","polyline"),n?(i.setAttribute("refX","1"),a.setAttribute("points","6,1 0 4 6,7")):a.setAttribute("points","1 3.5 6,1 6,7"),l=" arrow-no-fill";break;case 2:(a=document.createElementNS("http://www.w3.org/2000/svg","polyline")).setAttribute("points","0,0 5,0 5,5 0,5 0,0"),i.setAttribute("refY","3");break;case 3:(a=document.createElementNS("http://www.w3.org/2000/svg","polyline")).setAttribute("points","1,3.5 3.5,1 6,3.5 3.5,6"),i.setAttribute("refY","3.5");break;case 4:(a=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("cx","3"),a.setAttribute("cy","3"),a.setAttribute("r","3"),i.setAttribute("refY","3"),i.setAttribute("refX","3"),l=" arrow-no-stroke";break;case 5:(a=document.createElementNS("http://www.w3.org/2000/svg","polyline")).setAttribute("points","1,0 1,8"),i.setAttribute("refX","1")}return a.style.strokeLinejoin="miter",i.appendChild(a),o.appendChild(i),a.setAttribute("class",t.ui+"-arrow-head"+l),[i,a]},t.annotatorIdx=0,t.patternIdx=0,t.arrowMarkerIdx=0,t.filterIdx=0,t}();!function(t){t[t.SOLID=0]="SOLID",t[t.DOTTED=1]="DOTTED",t[t.DASHED=2]="DASHED"}(i||(i={})),function(t){t[t.NONE=0]="NONE",t[t.ARROW=1]="ARROW",t[t.OPEN_ARROW=2]="OPEN_ARROW",t[t.RECT=3]="RECT",t[t.DIAMOND_ARROW=4]="DIAMOND_ARROW",t[t.OVAL_ARROW=5]="OVAL_ARROW",t[t.LINE_ARROW=6]="LINE_ARROW"}(o||(o={})),function(t){t[t.BLUR=1]="BLUR",t[t.SHADOW=2]="SHADOW"}(a||(a={}));var y=function(){function t(t,e){var r=this;this.properties=[],this.RESIZE_ELEM_SIZE=8,this.fillPattern=null,this.filters={},this.drawStyle={startArrow:0,endArrow:0,width:2,type:i.SOLID,color:"#000"},this.fillStyle={fillType:0,color:"#000"},this.startDrag=function(t,e){var n=r;n.startX=t,n.startY=e,n.isDragging=!0,n.elementMatrix=n.svgGroupElement.transform.baseVal.getItem(0).matrix.translate(0,0),n.parent.startDrag(t,e),n.onSelectHandler&&n.onSelectHandler(n)},this.onTouchStart=function(t){var e=t.changedTouches[0];t.stopPropagation(),r.setSelected(!0),r.startDrag(e.screenX,e.screenY)},this.onMouseDown=function(t){t.stopPropagation(),r.setSelected(!0);var e=r.getPixelRatio();r.startDrag(t.screenX/e,t.screenY/e)},this.onTouchEnd=function(t){r.isDragging=!1},this.onMouseUp=function(t){r.isDragging=!1},this.onTouchMove=function(t){var e=r;if(t.stopImmediatePropagation(),t.preventDefault(),t.stopPropagation(),e.isDragging){var n=t.changedTouches[0];e.move(n.screenX,n.screenY,n)}},this.onMouseMove=function(t){var e=r;if(e.isDragging){t.stopPropagation();var n=r.getPixelRatio();e.move(t.screenX/n,t.screenY/n,t)}};var n=this;n.config=t,n.parent=e,n.width=200*t.sizePercentage,n.height=80*t.sizePercentage,n.init()}return t.prototype.getElement=function(){return this.svgGroupElement},t.prototype.clean=function(){},t.prototype.init=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","g"),e=this;t.transform.baseVal.appendItem(v.createTransform(e.config)),t.addEventListener("touchstart",e.onTouchStart,{passive:!1}),t.addEventListener("touchend",e.onTouchEnd,{passive:!1}),t.addEventListener("touchmove",e.onTouchMove,{passive:!1}),t.addEventListener("mousedown",e.onMouseDown),t.addEventListener("mouseup",e.onMouseUp),t.addEventListener("mousemove",e.onMouseMove),t.style.zIndex="100",this.svgGroupElement=t,e.elementMatrix=e.svgGroupElement.transform.baseVal.getItem(0).matrix.translate(0,0)},t.prototype.getPixelRatio=function(){return g.isEdge()?window.devicePixelRatio:1},t.prototype.processMouseUp=function(){this.isDragging=!1},t.prototype.move=function(t,e,r){var n=this.svgGroupElement.getScreenCTM().a;this.moveBy((t-this.startX)/n,(e-this.startY)/n,r)},t.prototype.moveBy=function(t,e,r){var n=this.svgGroupElement.transform.baseVal.getItem(0);n.setMatrix(this.elementMatrix.translate(t,e)),this.svgGroupElement.transform.baseVal.replaceItem(n,0)},t.prototype.createResizeElement=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","circle");return e.transform.baseVal.appendItem(v.createTransform(this.config)),e.setAttribute("class","anotator-resize-element"),g.isMobileDevice()?(e.setAttribute("r","10"),e.setAttribute("cx","5"),e.setAttribute("cy","5")):(e.setAttribute("r","8"),e.setAttribute("cx","4"),e.setAttribute("cy","4")),e.style.display="none",e},t.prototype.intersects=function(t,e,r,n){return!1},t.prototype.containsPoint=function(t,e){return!1},t.prototype.setStrokeType=function(t){},t.prototype.getStrokeType=function(){return this.drawStyle?this.drawStyle.type:-1},t.prototype.getStrokeWidth=function(){return this.drawStyle?this.drawStyle.width:-1},t.prototype.setStrokeWidth=function(t){},t.prototype.setDrawColor=function(t){},t.prototype.setFillColor=function(t){},t.prototype.setFillType=function(t){},t.prototype.setSelected=function(t){this.selected=t},t.prototype._setStrokeType=function(t,e){var r="none",n="unset";this.drawStyle.type=e;var o=t.style;switch(e){case i.DOTTED:var a=parseInt(o.strokeWidth,10);if(isNaN(a))return;r="1 "+(a*(a<7?2:1.5)).toString(),n="round";break;case i.DASHED:r="10%"}o.strokeDasharray=r,o.strokeLinecap=n},t.prototype._setStrokeWidth=function(t,e){var r=t.style;r.strokeWidth=e.toString(),this.drawStyle.type==i.DOTTED&&(r.strokeDasharray="1 "+(e*(e<7?2:1.5)).toString(),r.strokeLinecap="round")},t.prototype.setDrawStyle=function(t){var e=this.drawStyle;e.type=t.type,e.width=t.width,e.color=t.color,e.startArrow=t.startArrow,e.endArrow=t.endArrow,this.setDrawColor(t.color),this.setStrokeWidth(t.width),this.setStrokeType(t.type)},t.prototype.getDrawStyle=function(){return this.drawStyle},t.prototype.setFillStyle=function(t){var e,r,i,o,l=this,s=l.fillStyle,c=!1,d=!1;s.color!=t.color&&(s.color=t.color,c=!0),s.fillType!=t.fillType&&(s.fillType=t.fillType,d=!0),c&&l.setFillColor(t.color),d&&l.setFillType(t.fillType),s.opacity!=t.opacity&&(s.opacity=t.opacity,l.setOpacity(s.opacity));var p=!1,u=!1,h=l.filters,g=v.getDefs(l.config);if(h[a.BLUR]&&(g.removeChild(h[a.BLUR]),h[a.BLUR]=null),h[a.SHADOW]&&(g.removeChild(h[a.SHADOW]),h[a.SHADOW]=null),t.effects&&t.effects.length)try{for(var f=n(t.effects),m=f.next();!m.done;m=f.next()){var y=m.value,w=null;switch(y.effectType){case a.BLUR:if(p=!0,t.effects.length>1)try{for(var b=(i=void 0,n(t.effects)),x=b.next();!x.done;x=b.next()){var S=x.value;if(S.effectType==a.SHADOW){u=!0,w=S;break}}}catch(t){i={error:t}}finally{try{x&&!x.done&&(o=b.return)&&o.call(b)}finally{if(i)throw i.error}}if(h[a.BLUR])h[a.BLUR].innerHTML='<feGaussianBlur stdDeviation="'+parseInt(y.value,10)+'"/>';else if(u){var E=v.createShadowFilter(l.config,y,w);l.baseSVGElement.setAttribute("filter","url(#"+E.id+")"),h[a.BLUR]=E}else{var k=v.createBlurFilter(l.config,y);l.baseSVGElement.setAttribute("filter","url(#"+k.id+")"),h[a.BLUR]=k}break;case a.SHADOW:if(u=!0,p)break;h[a.SHADOW]?v.setShadowFilterValue(h[a.SHADOW],y):(k=v.createShadowFilter(l.config,y),l.baseSVGElement.setAttribute("filter","url(#"+k.id+")"),h[a.SHADOW]=k)}}}catch(t){e={error:t}}finally{try{m&&!m.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}p||u||l.baseSVGElement.setAttribute("filter","none"),s.effects=t.effects},t.prototype.getFillStyle=function(){return this.fillStyle},t.prototype.setOpacity=function(t){t>100?t=100:t<0&&(t=0),this.baseSVGElement&&(this.baseSVGElement.style.opacity=(t/100).toString())},t.prototype.isOnTop=function(){return!1},t.prototype.toXML=function(){return null},t.prototype.fromXML=function(t){},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.loadXMLDraw=function(t){var e=this;e.setDrawStyle({width:e.getXMLNumber(t,"dw"),type:e.getXMLNumber(t,"dt"),color:t.getAttribute("dc")||"#000",startArrow:e.getXMLNumber(t,"sa"),endArrow:e.getXMLNumber(t,"ea")})},t.prototype.loadXMLFill=function(t){for(var e in this.setFillStyle({fillType:this.getXMLNumber(t,"ft"),color:t.getAttribute("fc")||"#000",opacity:this.getXMLNumber(t,"op")}),this.filters){var r=document.createElement("f");r.setAttribute("i",e),r.setAttribute("v",this.filters[e]),t.appendChild(r)}},t.prototype.getXMLNumber=function(t,e){var r=t.getAttribute(e),n=0;return r&&(n=parseInt(r,10),isNaN(n)&&(n=0)),n},t.prototype.toJSON=function(){return null},t.prototype.fromJSON=function(t){},t.prototype.addDraw=function(t){var e=this.drawStyle;t.setAttribute("dw",e.width.toString()),t.setAttribute("dt",e.type.toString()),t.setAttribute("dc",e.color),t.setAttribute("sa",e.startArrow.toString()),t.setAttribute("ea",e.endArrow.toString())},t.prototype.addFill=function(t){var e=this.fillStyle;t.setAttribute("ft",e.fillType.toString()),t.setAttribute("fc",e.color),e.opacity&&t.setAttribute("op",e.opacity.toString())},t.prototype.addJSONDraw=function(t){var e=this.drawStyle;t.dw=e.width,t.dt=e.type,t.dc=e.color,t.sa=e.startArrow,t.ea=e.endArrow},t.prototype.loadJSONDraw=function(t){this.setDrawStyle({width:t.dw,type:t.dt,color:t.dc,startArrow:parseInt(t.sa,10),endArrow:parseInt(t.ea,10)})},t.prototype.loadJSONFill=function(t){this.setFillStyle({fillType:t.ft,color:t.fc,opacity:t.op})},t.prototype.addJSONFill=function(t){var e=this.fillStyle;t.ft=e.fillType,t.fc=e.color,t.op=e.opacity},t.prototype.getProperties=function(){return this.properties},t}(),w=function(){function t(){}return t.register=function(t,e){this.classList[t]=e},t.create=function(t,e){var r=this.classList[t];return r?1==e.length?new r(e[0]):new r(e[0],e[1]):null},t.classList=new Object,t}(),b=function(){function t(){}return t.FILL_PROPERTY="fill",t.DRAW_PROPERTY="draw",t.FONT_PROPERTY="font",t.BLUR_PROPERTY="blur",t}(),x=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.x1=0,n.y1=0,n.y2=0,n.onResizeTouchStart=function(t){var e=t.changedTouches[0];t.preventDefault(),n.onResizeDown(e)},n.onResizeMouseDown=function(t){n.onResizeDown(t)},n.onResizeDown=function(t){var e=n;e.currentResizeElement=t.target,e.screenX=t.screenX,e.screenY=t.screenY,e.currentResizeElement==e.resizeElement1?(e.lineStartX=e.x1,e.lineStartY=e.y1):(e.lineStartX=e.x2,e.lineStartY=e.y2)},n.onResizeMouseUp=function(t){t.preventDefault(),n.currentResizeElement=null},n.onMouseUp=function(t){n.currentResizeElement=null,n.isDragging=!1},n.processMouseUp=function(){t.prototype.processMouseUp.call(n)},n.x2=n.width,n.config=e,n.createLine(e),n.properties=[b.DRAW_PROPERTY],n}return r(e,t),e.prototype.createLine=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","line"),r=document.createElementNS("http://www.w3.org/2000/svg","line"),n=this,i=n.svgGroupElement,o=n.width.toString();e.setAttribute("x2",o),e.setAttribute("class",t.ui+"-annotator-line"),r.setAttribute("class","annotator-back-line"),r.setAttribute("x2",o),n.resizeElement1=n.createResizeElement(t),n.resizeElement2=n.createResizeElement(t),n.addResizeEvents(n.resizeElement1),n.addResizeEvents(n.resizeElement2),i.appendChild(e),i.appendChild(r),i.appendChild(n.resizeElement1),i.appendChild(n.resizeElement2),n.baseSVGElement=e,n.backLineSVG=r,n.arrangeResizeElements()},e.prototype.addResizeEvents=function(t){t.addEventListener("mousedown",this.onResizeMouseDown),t.addEventListener("mouseup",this.onResizeMouseUp),t.addEventListener("touchstart",this.onResizeTouchStart,{passive:!1}),t.addEventListener("touchend",this.onResizeMouseUp,{passive:!1})},e.prototype.clean=function(){var t=this,e=v.getDefs(t.config);t.arrowEndHead&&e.removeChild(t.arrowEndHead.parentNode),t.arrowStartHead&&e.removeChild(t.arrowStartHead.parentNode)},e.prototype.moveBy=function(e,r,n){var i=this,o=i.currentResizeElement,a=i.baseSVGElement,l=i.backLineSVG;if(o){if(o==this.resizeElement1){i.x1=i.lineStartX+n.screenX-i.screenX,i.y1=i.lineStartY+n.screenY-i.screenY;var s=i.x1.toString(),c=i.y1.toString();a.setAttribute("x1",s),a.setAttribute("y1",c),l.setAttribute("x1",s),l.setAttribute("y1",c)}else{i.x2=this.lineStartX+n.screenX-i.screenX,i.y2=this.lineStartY+n.screenY-i.screenY;var d=i.x2.toString(),p=i.y2.toString();a.setAttribute("x2",d),a.setAttribute("y2",p),l.setAttribute("x2",d),l.setAttribute("y2",p)}this.arrangeResizeElements()}else t.prototype.moveBy.call(this,e,r,n)},e.prototype.arrangeResizeElements=function(){var t=this,e=t.RESIZE_ELEM_SIZE/2,r=t.x1-e,n=t.y1-e,i=t.x2-e,o=t.y2-e;t.arrangeElement(t.resizeElement1,r,n),t.arrangeElement(t.resizeElement2,i,o)},e.prototype.arrangeElement=function(t,e,r){var n=t.transform.baseVal.getItem(0);n.setTranslate(e,r),t.transform.baseVal.replaceItem(n,0)},e.prototype.setDrawStyle=function(e){t.prototype.setDrawStyle.call(this,e);var r=e.startArrow,n=e.endArrow,i=this,o=e.color,a=i.baseSVGElement;switch(r){case 0:i.arrowStartHead&&(v.getDefs(i.config).removeChild(i.arrowStartHead.parentNode),i.arrowStartHead=null),a.setAttribute("marker-start","none");break;default:var l=v.createArrowMarker(i.config,r-1,i.arrowStartHead?i.arrowStartHead.parentNode:null,!0);a.setAttribute("marker-start","url(#"+l[0].getAttribute("id")+")"),this.arrowStartHead=l[1],l[1].style.fill=o,l[1].style.stroke=o}switch(n){case 0:i.arrowEndHead&&(v.getDefs(i.config).removeChild(i.arrowEndHead.parentNode),i.arrowEndHead=null),a.setAttribute("marker-end","none");break;default:l=v.createArrowMarker(i.config,n-1,i.arrowEndHead?i.arrowEndHead.parentNode:null),a.setAttribute("marker-end","url(#"+l[0].getAttribute("id")+")"),this.arrowEndHead=l[1],l[1].style.fill=o,l[1].style.stroke=o}},e.prototype.setDrawColor=function(t){var e=this.arrowEndHead,r=this.arrowStartHead;this.baseSVGElement.style.stroke=t,e&&(e.style.fill=t,e.style.stroke=t),r&&(r.style.fill=t,r.style.stroke=t)},e.prototype.setSelected=function(e){this.selected!==e&&(t.prototype.setSelected.call(this,e),this.resizeElement1.style.display=e?"":"none",this.resizeElement2.style.display=e?"":"none")},e.prototype.containsPoint=function(t,e){var r,n,i=this.svgGroupElement.transform.baseVal.getItem(0).matrix,o=i.e,a=i.f,l=this.x1+o,s=this.y1+a,c=this.x2+o,d=this.y2+a,p=(l-c)*(l-c)+(s-d)*(s-d);if(0==p)r=l,n=d;else{var u=((t-l)*(c-l)+(e-s)*(d-s))/p;u<0?(r=l,n=s):u>1?(r=c,n=d):(r=l+u*(c-l),n=s+u*(d-s))}return(r-t)*(r-t)+(n-e)*(n-e)<3},e.prototype.intersects=function(t,r,n,i){var o=this.svgGroupElement.transform.baseVal.getItem(0).matrix;if(n<=0||i<=0)return!1;var a=o.e,l=o.f,s=this.x1+a,c=this.y1+l,d=this.x2+a,p=this.y2+l;return e.intersectsRect(s,c,d,p,t,r,n,i)},e.intersectsRect=function(t,r,n,i,o,a,l,s){if(t>=o&&t<=o+l&&r>=a&&r<=a+s)return!0;if(n>=o&&n<=o+l&&i>=a&&i<=a+s)return!0;var c=o+l,d=a+s,p=e.linesIntersect;return p(t,r,n,i,o,a,o,d)||p(t,r,n,i,o,d,c,d)||p(t,r,n,i,c,d,c,a)||p(t,r,n,i,c,a,o,a)},e.prototype.setStrokeType=function(e){t.prototype._setStrokeType.call(this,this.baseSVGElement,e)},e.prototype.setStrokeWidth=function(e){t.prototype._setStrokeWidth.call(this,this.baseSVGElement,e)},e.prototype.toXML=function(){var t=document.createElementNS(null,this.constructor.xtype),e=this,r=this.svgGroupElement.transform.baseVal.getItem(0).matrix,n=r.e,i=r.f;return e.addDraw(t),t.setAttribute("x1",(e.x1+n).toString()),t.setAttribute("y1",(e.y1+i).toString()),t.setAttribute("x2",(e.x2+n).toString()),t.setAttribute("y2",(e.y2+i).toString()),t},e.prototype.fromXML=function(t){var e=this;e.x1=e.getXMLNumber(t,"x1"),e.y1=e.getXMLNumber(t,"y1"),e.x2=e.getXMLNumber(t,"x2"),e.y2=e.getXMLNumber(t,"y2"),e.setCoordinates(),e.arrangeResizeElements(),e.loadXMLDraw(t)},e.prototype.setCoordinates=function(){var t=this,e=t.baseSVGElement,r=t.backLineSVG;e.setAttribute("x1",t.x1.toString()),e.setAttribute("y1",t.y1.toString()),r.setAttribute("x1",t.x1.toString()),r.setAttribute("y1",t.y1.toString()),e.setAttribute("x2",t.x2.toString()),e.setAttribute("y2",t.y2.toString()),r.setAttribute("x2",t.x2.toString()),r.setAttribute("y2",t.y2.toString())},e.prototype.toJSON=function(){var t=this,e=t.svgGroupElement.transform.baseVal.getItem(0).matrix,r=e.e,n=e.f,i={xtype:this.constructor.xtype,x1:t.x1+r,y1:t.y1+n,x2:t.x2+r,y2:t.y2+n};return t.addJSONDraw(i),i},e.prototype.fromJSON=function(t){var e=this;t.x1&&(e.x1=t.x1),t.y1&&(e.y1=t.y1),t.x2&&(e.x2=t.x2),t.y2&&(e.y2=t.y2),e.setCoordinates(),e.arrangeResizeElements(),e.loadJSONDraw(t)},e.xtype="line",e.linesIntersect=function(t,r,n,i,o,a,l,s){var c,d,p,u,h=e.between,g=e.area2;return 0==(c=g(t,r,n,i,o,a))?!!h(t,r,n,i,o,a)||0==g(t,r,n,i,l,s)&&(h(o,a,l,s,t,r)||h(o,a,l,s,n,i)):0==(d=g(t,r,n,i,l,s))?h(t,r,n,i,l,s):0==(p=g(o,a,l,s,t,r))?!!h(o,a,l,s,t,r)||0==g(o,a,l,s,n,i)&&(h(t,r,n,i,o,a)||h(t,r,n,i,l,s)):0==(u=g(o,a,l,s,n,i))?h(o,a,l,s,n,i):c>0!=d>0&&p>0!=u>0},e.area2=function(t,e,r,n,i,o){return(r-t)*(o-e)-(i-t)*(n-e)},e.between=function(t,e,r,n,i,o){return t!=r?t<=i&&i<=r||t>=i&&i>=r:e<=o&&o<=n||e>=o&&o>=n},e}(y);w.register(x.xtype,x);var S='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><line class="ea-button" style="stroke-width:3;" y1="28" x2="29" y2="2"></line></svg>',E=function(t){function e(){var e=t.call(this)||this;return e.iconSVG=S,e}return r(e,t),e.prototype.createAnnotator=function(t,e){return new x(t,e)},e}(s),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.stop=function(){this.stopped=!0},e}(y),A=function(t,e){this.x=t,this.y=e},L=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.bufferSize=6,n.buffer=[],n.points=[],n.initialized=!1,n.isDrawing=!1,n.initAnnotator=function(){var t=n,e=t.parent.getSVGContainer();t.rect=e.getBoundingClientRect(),g.isMobileDevice()?(e.addEventListener("touchstart",t.parentTouchStart,{passive:!1}),e.addEventListener("touchmove",t.parentTouchMove,{passive:!1}),e.addEventListener("touchend",t.parentTouchEnd,{passive:!1})):(e.addEventListener("mousemove",t.parentMouseMove),e.addEventListener("mousedown",t.parentMouseDown),e.addEventListener("mouseup",t.parentMouseUp)),n.svgContainer=e,n.createPath(n.config)},n.parentTouchMove=function(t){var e=n;t.preventDefault(),e.isDrawing&&e.baseSVGElement&&(e.appendToBuffer(e.getMousePosition(t.changedTouches[0])),e.updateSvgPath())},n.parentMouseMove=function(t){var e=n;t.preventDefault(),e.isDrawing&&e.baseSVGElement&&(e.appendToBuffer(e.getMousePosition(t)),e.updateSvgPath())},n.parentTouchStart=function(t){t.preventDefault(),n.startDraging(t.changedTouches[0])},n.parentMouseDown=function(t){n.startDraging(t)},n.startDraging=function(t){var e=n;e.baseSVGElement||e.createPath(e.config),e.isDrawing=!0,e.buffer=[];var r=e.getMousePosition(t);e.appendToBuffer(r),e.points.push(r),e.strPath+="M"+r.x+" "+r.y,e.baseSVGElement.setAttribute("d",e.strPath)},n.parentTouchEnd=function(t){t.preventDefault(),n.endDragging(t.changedTouches[0])},n.parentMouseUp=function(t){n.endDragging(t)},n.endDragging=function(t){var e=n;e.isDrawing=!1;var r=e.getMousePosition(t);e.appendToBuffer(r),e.updateSvgPath(),e.points.push(new A(Number.NaN,Number.NaN)),e.strPath+=" ",e.baseSVGElement.setAttribute("d",e.strPath)},n.getMousePosition=function(t){var e=n.rect;return new A(Math.round(t.pageX-e.left-window.scrollX),Math.round(t.pageY-e.top-window.scrollY))},n.appendToBuffer=function(t){var e=n.buffer,r=n.bufferSize;for(e.push(t);e.length>r;)e.shift()},n.getAveragePoint=function(t){var e=n.buffer.length;if(e%2==1||e>=n.bufferSize){var r=0,i=0,o=void 0,a=void 0,l=0;for(a=t;a<e;a++)l++,r+=(o=n.buffer[a]).x,i+=o.y;return{x:Math.round(r/l),y:Math.round(i/l)}}return null},n.updateSvgPath=function(){var t=n,e=t.getAveragePoint(0);if(e){t.strPath+=" L"+e.x+" "+e.y,t.points.push(e);for(var r="",i=t.buffer.length,o=2;o<i;o+=2)r+=" L"+(e=t.getAveragePoint(o)).x+" "+e.y;t.baseSVGElement.setAttribute("d",t.strPath+r)}},n.config=e,n.strPath="",n.initAnnotator(),n.properties.push(b.DRAW_PROPERTY),n}return r(e,t),e.prototype.createPath=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("fill","none"),e.setAttribute("stroke",t.drawStyle.color),e.setAttribute("stroke-width",t.drawStyle.width.toString()),this.baseSVGElement=e,this.svgGroupElement.appendChild(e),this.parent.getSVGContainer().appendChild(this.svgGroupElement)},e.prototype.stop=function(){var t=this,e=t.parent.getSVGContainer();g.isMobileDevice()?(e.removeEventListener("touchstart",t.parentTouchStart),e.removeEventListener("touchmove",t.parentTouchMove),e.removeEventListener("touchend",t.parentTouchEnd)):(e.removeEventListener("mousemove",t.parentMouseMove),e.removeEventListener("mousedown",t.parentMouseDown),e.removeEventListener("mouseup",t.parentMouseUp)),t.initialized=!0},e.prototype.moveBy=function(e,r,n){this.initialized&&t.prototype.moveBy.call(this,e,r,n)},e.prototype.setSelected=function(e){t.prototype.setSelected.call(this,e),this.baseSVGElement&&(this.baseSVGElement.style.stroke=e?"green":this.drawStyle.color)},e.prototype.intersects=function(t,e,r,i){var o,a,l=this.svgGroupElement.transform.baseVal.getItem(0).matrix,s=l.e,c=l.f,d=null;try{for(var p=n(this.points),u=p.next();!u.done;u=p.next()){var h=u.value;if(isNaN(h.x))d=null;else{if(d&&x.intersectsRect(d.x+s,d.y+c,h.x+s,h.y+c,t,e,r,i))return!0;d=h}}}catch(t){o={error:t}}finally{try{u&&!u.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}return!1},e.prototype.setStrokeType=function(e){this.baseSVGElement&&t.prototype._setStrokeType.call(this,this.baseSVGElement,e)},e.prototype.setStrokeWidth=function(e){this.baseSVGElement&&t.prototype._setStrokeWidth.call(this,this.baseSVGElement,e)},e.prototype.setDrawColor=function(t){this.baseSVGElement&&(this.baseSVGElement.style.stroke=t)},e.prototype.toXML=function(){var t=document.createElementNS(null,e.xtype);this.addDraw(t),this.addFill(t);var r,n,i,o=this.points,a=o.length,l=document;for(r=0;r<a;r++)i=o[r],n=l.createElementNS(null,"p"),isNaN(i.x)||(n.setAttribute("x",i.x.toFixed(1)),n.setAttribute("y",i.y.toFixed(1))),t.appendChild(n);return t},e.prototype.fromXML=function(t){var e,r,n,i,o=this,a=t.getElementsByTagName("p"),l=a.length,s=[],c="",d=!1;for(l>0&&(i=a[0],r=parseInt(i.getAttribute("x"),10),n=parseInt(i.getAttribute("y"),10),s.push({x:r,y:n}),c="M"+r+" "+n),e=1;e<l;e++)i=a[e],r=parseInt(i.getAttribute("x"),10),n=parseInt(i.getAttribute("y"),10),s.push({x:r,y:n}),d?(c+=" M"+r+" "+n,d=!1):isNaN(r)?d=!0:c+=" L"+r+" "+n;o.baseSVGElement||o.createPath(o.config),o.loadXMLDraw(t),o.loadXMLFill(t),o.baseSVGElement.setAttribute("d",c),o.strPath=c,o.points=s},e.prototype.toJSON=function(){var t,r,i,o={},a=[];try{for(var l=n(this.points),s=l.next();!s.done;s=l.next())i=s.value,a.push({x:i.x.toFixed(1),y:i.y.toFixed(1)})}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return this.addJSONDraw(o),this.addJSONFill(o),o.xtype=e.xtype,o.points=a,o},e.prototype.fromJSON=function(t){var e=this;if(t.points&&Array.isArray(t.points)){var r=t.points,n=r.length,i=void 0,o=[],a="",l=void 0,s=void 0,c=void 0,d=!1;for(n>0&&(c=r[0],l=parseInt(c.x,10),s=parseInt(c.y,10),o.push({x:l,y:s}),a="M"+l+" "+s),i=1;i<n;i++)c=r[i],l=parseInt(c.x,10),s=parseInt(c.y,10),o.push({x:l,y:s}),d?(a+=" M"+l+" "+s,d=!1):isNaN(l)?d=!0:a+=" L"+l+" "+s;e.baseSVGElement||e.createPath(e.config),e.loadJSONDraw(t),e.loadJSONFill(t),e.baseSVGElement.setAttribute("d",a),e.strPath=a,e.points=o}},e.xtype="freeDraw",e}(k);w.register(L.xtype,L);var C='<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t viewBox="0 0 283.093 283.093" style="enable-background:new 0 0 283.093 283.093;" xml:space="preserve">\r\n<g>\r\n\t<path class="ea-button" d="M271.315,54.522L218.989,2.196c-2.93-2.928-7.678-2.928-10.607,0L78.274,132.303c-1.049,1.05-1.764,2.388-2.053,3.843\r\n\t\tl-12.964,65.29c-0.487,2.456,0.282,4.994,2.053,6.765c1.421,1.42,3.334,2.196,5.304,2.196c0.485,0,0.975-0.047,1.461-0.144\r\n\t\tl65.29-12.964c1.456-0.289,2.793-1.004,3.843-2.053L271.315,65.129C274.244,62.2,274.244,57.452,271.315,54.522z M83.182,178.114\r\n\t\tl6.776-34.127l39.566,39.566l-34.127,6.776L83.182,178.114z"/>\r\n\t<path class="ea-button" d="M205.912,227.066c-71.729-30.029-118.425,19.633-132.371,27.175c-17.827,9.641-42.941,20.97-48.779,1.358\r\n\t\tc-3.522-11.832,15.521-24.479,28.131-28.42c9.2-2.876,5.271-17.358-3.988-14.465c-19.582,6.121-42.948,22.616-38.851,45.839\r\n\t\tc3.044,17.256,24.67,32.995,66.368,11.114c30.308-15.902,50.897-48.84,114.733-31.783c20.969,5.602,37.92,19.27,45.178,40.057\r\n\t\tc3.168,9.07,17.662,5.169,14.465-3.988C243.062,251.799,227.411,236.067,205.912,227.066z"/>\r\n</g>\r\n</svg>\r\n',D=function(t){function e(e){var r=t.call(this)||this;return r.config=e,r.iconSVG=C,r.itemId="free-draw",r.title="Free Draw",r}return r(e,t),e.prototype.createAnnotator=function(t,e){var r=this.lastAnnotator;if(r)return r.stop(),this.element.className=this.element.className.replace(" "+t.ui+"-toolbar-item-pressed",""),this.lastAnnotator=null,r.setSelected(!1),null;this.element.className+=" "+t.ui+"-toolbar-item-pressed";var n=new L(t,e);return this.lastAnnotator=n,n},e.prototype.setPushed=function(t){var e=this.element,r=this.config.ui,n=e.className;this.pushed=t,t?-1===n.indexOf("toolbar-item-pressed")&&(e.className+=" "+r+"-toolbar-item-pressed"):e.className=n.replace(" "+r+"-toolbar-item-pressed",""),this.lastAnnotator=null},e}(c),M=function(t){function e(e,r){var n=t.call(this,e,r)||this;n.currentResizeIndex=-1,n.cx=0,n.cy=0,n.onResizeTouchStart=function(t){var e=t.changedTouches[0];n.onResizeDown(e)},n.onResizeMouseDown=function(t){n.onResizeDown(t)},n.onResizeMouseUp=function(t){n.currentResizeIndex=-1},n.onMouseUp=function(t){n.currentResizeIndex=-1,n.isDragging=!1},n.processMouseUp=function(){t.prototype.processMouseUp.call(n)};var i=n;return i.rx=50*e.sizePercentage,i.ry=50*e.sizePercentage,i.createEllipse(e),i.properties=[b.DRAW_PROPERTY,b.FILL_PROPERTY],n}return r(e,t),e.prototype.createEllipse=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","ellipse"),r=this;e.setAttribute("cx","0"),e.setAttribute("cy","0"),e.setAttribute("rx",r.rx.toString()),e.setAttribute("ry",r.ry.toString()),r.svgGroupElement.appendChild(e),r.baseSVGElement=e,r.resizeElements=new Array;for(var n=0;n<4;n++){var i=r.createResizeElement(t);r.resizeElements.push(i),r.addResizeEvents(i),r.svgGroupElement.appendChild(i)}r.arrangeResizeElements()},e.prototype.addResizeEvents=function(t){t.addEventListener("mousedown",this.onResizeMouseDown),t.addEventListener("mouseup",this.onResizeMouseUp),t.addEventListener("touchstart",this.onResizeTouchStart),t.addEventListener("touchend",this.onResizeMouseUp)},e.prototype.onResizeDown=function(t){var e=this,r=e.resizeElements.length,n=t.target;e.screenX=t.screenX,e.screenY=t.screenY,e.dragStartRx=e.rx,e.dragStartRy=e.ry;for(var i=0;i<r;i++)if(n==e.resizeElements[i]){e.currentResizeIndex=i,e.dragStartX=e.cx,e.dragStartY=e.cy;break}},e.prototype.moveBy=function(e,r,n){var i=this,o=i.currentResizeIndex;if(o>=0){var a=n.screenX-i.screenX,l=n.screenY-i.screenY;switch(o){case 0:i.rx=i.dragStartRx-a/2,i.ry=i.dragStartRy-l/2;break;case 1:i.rx=i.dragStartRx+a/2,i.ry=i.dragStartRy-l/2;break;case 2:i.rx=i.dragStartRx+a/2,i.ry=i.dragStartRy+l/2;break;case 3:i.rx=i.dragStartRx-a/2,i.ry=i.dragStartRy+l/2}i.cx=i.dragStartX+a/2,i.cy=i.dragStartY+l/2;var s=i.baseSVGElement;s.setAttribute("cx",i.cx.toString()),s.setAttribute("cy",i.cy.toString()),s.setAttribute("rx",i.rx.toString()),s.setAttribute("ry",i.ry.toString()),this.arrangeResizeElements()}else t.prototype.moveBy.call(this,e,r,n)},e.prototype.arrangeResizeElements=function(){var t=this.RESIZE_ELEM_SIZE/2;this.arrangeElement(this.resizeElements[0],this.cx-this.rx-t,this.cy-this.ry-t),this.arrangeElement(this.resizeElements[1],this.cx+this.rx,this.cy-this.ry-t),this.arrangeElement(this.resizeElements[2],this.cx+this.rx,this.cy+this.ry-t),this.arrangeElement(this.resizeElements[3],this.cx-this.rx-t,this.cy+this.ry-t)},e.prototype.arrangeElement=function(t,e,r){var n=t.transform.baseVal.getItem(0);n.setTranslate(e,r),t.transform.baseVal.replaceItem(n,0)},e.prototype.setDrawColor=function(t){this.baseSVGElement.style.stroke=t},e.prototype.setFillColor=function(t){if(0==this.fillStyle.fillType)this.baseSVGElement.style.fill=t;else{var e=this.fillPattern;e&&(e.style.stroke=t,e.style.fill=t)}},e.prototype.setFillType=function(t){var e=this;if(0==t)e.baseSVGElement.style.fill=e.fillStyle.color;else{var r=v.createFillPattern(e.config,t,e.fillPattern);r.style.stroke=e.fillStyle.color,r.style.fill=e.fillStyle.color,e.fillPattern=r,e.baseSVGElement.style.fill="url(#"+r.id+")"}},e.prototype.setSelected=function(e){if(this.selected!=e){t.prototype.setSelected.call(this,e);for(var r=0;r<4;r++)this.resizeElements[r].style.display=e?"":"none"}},e.prototype.containsPoint=function(t,e){var r=this,n=r.svgGroupElement.transform.baseVal.getItem(0).matrix,i=n.e,o=n.f,a=r.rx,l=r.ry,s=(t-(r.cx+i+a))/a,c=(e-(r.cy+o+l))/l;return s*s+c*c<1},e.prototype.intersects=function(t,e,r,n){var i=this,o=i.svgGroupElement.transform.baseVal.getItem(0).matrix,a=o.e,l=o.f,s=i.rx,c=i.ry,d=i.cx+a-s,p=i.cy+l-c,u=2*i.rx,h=2*i.ry;if(r<=0||n<=0)return!1;var g,f,m=(t-d)/u-.5,v=m+r/u,y=(e-p)/h-.5,w=y+n/h;return(g=m>0?m:v<0?v:0)*g+(f=y>0?y:w<0?w:0)*f<.25},e.prototype.setStrokeType=function(e){t.prototype._setStrokeType.call(this,this.baseSVGElement,e)},e.prototype.setStrokeWidth=function(e){t.prototype._setStrokeWidth.call(this,this.baseSVGElement,e)},e.prototype.getWidth=function(){return 2*this.rx},e.prototype.getHeight=function(){return 2*this.ry},e.prototype.toXML=function(){var t=document.createElementNS(null,e.xtype),r=this,n=r.svgGroupElement.transform.baseVal.getItem(0).matrix,i=n.e,o=n.f;return r.addDraw(t),r.addFill(t),t.setAttribute("cx",(r.cx+i).toString()),t.setAttribute("cy",(r.cy+o).toString()),t.setAttribute("rx",r.rx.toString()),t.setAttribute("ry",r.ry.toString()),t},e.prototype.fromXML=function(t){var e=this,r=function(t){var e=parseInt(t,10);return(isNaN(e)||e<0)&&(e=0),e},n=r(t.getAttribute("cx")),i=r(t.getAttribute("cy")),o=r(t.getAttribute("rx")),a=r(t.getAttribute("ry"));e.cx=n,e.cy=i,e.rx=o,e.ry=a,e.setCoordinates(),e.loadXMLDraw(t),e.loadXMLFill(t),e.arrangeResizeElements()},e.prototype.setCoordinates=function(){var t=this,e=t.baseSVGElement;e.setAttribute("cx",t.cx.toString()),e.setAttribute("cy",t.cy.toString()),e.setAttribute("rx",t.rx.toString()),e.setAttribute("ry",t.ry.toString())},e.prototype.toJSON=function(){var t=this,r=t.svgGroupElement.transform.baseVal.getItem(0).matrix,n=r.e,i=r.f,o={xtype:e.xtype,cx:t.cx+n,cy:t.cy+i,rx:t.rx,ry:t.ry};return t.addJSONDraw(o),t.addJSONFill(o),o},e.prototype.fromJSON=function(t){var e=this;t.cx&&(e.cx=t.cx),t.cy&&(e.cy=t.cy),t.rx&&(e.rx=t.rx),t.ry&&(e.ry=t.ry),e.loadJSONDraw(t),e.loadJSONFill(t),e.setCoordinates(),e.arrangeResizeElements()},e.xtype="ellipse",e}(y);w.register(M.xtype,M);var T='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><ellipse class="ea-button" cx="15" cy="15" rx="13" ry="13"></ellipse></svg>',N=function(t){function e(){var e=t.call(this)||this;return e.iconSVG=T,e}return r(e,t),e.prototype.createAnnotator=function(t,e){return new M(t,e)},e}(s),I=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.resizeElements=[],n.currentResizeIndex=-1,n.x=0,n.y=0,n.onResizeTouchStart=function(t){var e=t.changedTouches[0];n.onResizeDown(e)},n.onResizeMouseDown=function(t){n.onResizeDown(t)},n.onResizeDown=function(t){var e=n,r=e.resizeElements.length,i=t.target,o=e.getPixelRatio();e.screenX=t.screenX/o,e.screenY=t.screenY/o,e.dragStartW=e.width,e.dragStartH=e.height,e.dragStartX=e.x,e.dragStartY=e.y;for(var a=0;a<r;a++)if(i==n.resizeElements[a]){n.currentResizeIndex=a;break}},n.onResizeMouseUp=function(t){n.currentResizeIndex=-1},n.onMouseUp=function(t){n.currentResizeIndex=-1,n.isDragging=!1},n.processMouseUp=function(){t.prototype.processMouseUp.call(n)},n.config=e,n.initElement(e),n.properties=[b.DRAW_PROPERTY,b.FILL_PROPERTY],n}return r(e,t),e.prototype.initElement=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","rect"),r=this;e.setAttribute("x","0"),e.setAttribute("y","0"),e.setAttribute("width",r.width.toString()),e.setAttribute("height",r.height.toString()),r.svgGroupElement.appendChild(e),r.baseSVGElement=e;for(var n=0;n<4;n++){var i=r.createResizeElement(t);r.resizeElements.push(i),r.addResizeEvents(i),r.svgGroupElement.appendChild(i)}r.arrangeResizeElements()},e.prototype.addResizeEvents=function(t){g.isMobileDevice()?(t.addEventListener("touchstart",this.onResizeTouchStart),t.addEventListener("touchend",this.onResizeMouseUp)):(t.addEventListener("mousedown",this.onResizeMouseDown),t.addEventListener("mouseup",this.onResizeMouseUp))},e.prototype.moveBy=function(e,r,n){var i=this,o=i.currentResizeIndex;if(o>=0){var a=i.getPixelRatio(),l=n.screenX/a-i.screenX,s=n.screenY/a-i.screenY;switch(o){case 0:i.width=i.dragStartW-l,i.height=i.dragStartH-s,i.x=i.dragStartX+l,i.y=i.dragStartY+s;break;case 1:i.y=i.dragStartY+s,i.width=i.dragStartW+l,i.height=i.dragStartH-s;break;case 2:i.width=i.dragStartW+l,i.height=i.dragStartH+s;break;case 3:i.x=i.dragStartX+l,i.width=i.dragStartW-l,i.height=i.dragStartH+s}i.baseSVGElement.setAttribute("x",i.x.toString()),i.baseSVGElement.setAttribute("y",i.y.toString()),i.baseSVGElement.setAttribute("width",i.width.toString()),i.baseSVGElement.setAttribute("height",i.height.toString()),i.arrangeResizeElements()}else t.prototype.moveBy.call(this,e,r,n)},e.prototype.arrangeResizeElements=function(){var t=this.RESIZE_ELEM_SIZE/2,e=this,r=e.x-t,n=e.x+e.width-t,i=e.y-t,o=e.y+e.height-t;e.arrangeElement(e.resizeElements[0],r,i),e.arrangeElement(e.resizeElements[1],n,i),e.arrangeElement(e.resizeElements[2],n,o),e.arrangeElement(e.resizeElements[3],r,o)},e.prototype.arrangeElement=function(t,e,r){var n=t.transform.baseVal.getItem(0);n.setTranslate(e,r),t.transform.baseVal.replaceItem(n,0)},e.prototype.setDrawColor=function(t){this.baseSVGElement.style.stroke=t},e.prototype.setFillColor=function(t){this.baseSVGElement.style.fill=t},e.prototype.setFillType=function(t){var e=this;if(0==t)e.baseSVGElement.style.fill=e.fillStyle.color;else{var r=v.createFillPattern(e.config,t,e.fillPattern);r.style.stroke=e.fillStyle.color,r.style.fill=e.fillStyle.color,e.fillPattern=r,e.baseSVGElement.style.fill="url(#"+r.id+")"}},e.prototype.setSelected=function(e){if(this.selected!=e){t.prototype.setSelected.call(this,e);for(var r=this.resizeElements.length,n=0;n<r;n++)this.resizeElements[n].style.display=e?"":"none"}},e.prototype.intersects=function(t,r,n,i){var o=this,a=o.svgGroupElement.transform.baseVal.getItem(0).matrix,l=a.e,s=a.f,c=o.x+l,d=o.y+s,p=o.width,u=o.height;return e.intersects(c,d,p,u,t,r,n,i)},e.intersects=function(t,e,r,n,i,o,a,l){return a>0&&l>0&&r>0&&n>0&&i<t+r&&i+a>t&&o<e+n&&o+l>e},e.prototype.containsPoint=function(t,e){var r=this,n=r.svgGroupElement.transform.baseVal.getItem(0).matrix,i=n.e,o=n.f,a=r.x+i,l=r.y+o,s=r.width,c=r.height;return s>0&&c>0&&t>=a&&t<a+s&&e>=l&&e<l+c},e.prototype.setStrokeType=function(e){t.prototype._setStrokeType.call(this,this.baseSVGElement,e)},e.prototype.setStrokeWidth=function(e){t.prototype._setStrokeWidth.call(this,this.baseSVGElement,e)},e.prototype.toXML=function(){var t=document.createElementNS(null,e.xtype);return this._toXML(t),t},e.prototype._toXML=function(t){var e=this,r=e.svgGroupElement.transform.baseVal.getItem(0).matrix,n=r.e,i=r.f;e.addDraw(t),e.addFill(t),t.setAttribute("x",(e.x+n).toString()),t.setAttribute("y",(e.y+i).toString()),t.setAttribute("w",e.width.toString()),t.setAttribute("h",e.height.toString())},e.prototype.fromXML=function(t){var e=this,r=function(t){if(null===t)return 0;var e=parseInt(t,10);return isNaN(e)&&(e=0),e},n=r(t.getAttribute("x")),i=r(t.getAttribute("y")),o=r(t.getAttribute("w")),a=r(t.getAttribute("h"));e.x=n,e.y=i,e.width=o,e.height=a;var l=e.baseSVGElement;l.setAttribute("x",n.toString()),l.setAttribute("y",i.toString()),l.setAttribute("width",o.toString()),l.setAttribute("height",a.toString()),e.loadXMLDraw(t),e.loadXMLFill(t),e.resizeElements.length&&e.arrangeResizeElements()},e.prototype.toJSON=function(){var t=this,r=t.svgGroupElement.transform.baseVal.getItem(0).matrix,n=r.e,i=r.f,o={xtype:e.xtype,x:t.x+n,y:t.y+i,w:t.width,h:t.height};return t.addJSONDraw(o),t.addJSONFill(o),o},e.prototype.fromJSON=function(t){var e=this;t.x&&(e.x=t.x),t.y&&(e.y=t.y),t.w&&(e.width=t.w),t.h&&(e.height=t.h),e.loadJSONDraw(t),e.loadJSONFill(t),e.baseSVGElement.setAttribute("x",e.x.toString()),e.baseSVGElement.setAttribute("y",e.y.toString()),e.baseSVGElement.setAttribute("width",e.width.toString()),e.baseSVGElement.setAttribute("height",e.height.toString()),e.resizeElements.length&&e.arrangeResizeElements()},e.xtype="rect",e}(y);w.register(I.xtype,I);var O='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><rect class="ea-button" x="2" y="3" width="27" height="24"></rect></svg>',R=function(t){function e(){var e=t.call(this)||this;return e.iconSVG=O,e}return r(e,t),e.prototype.createAnnotator=function(t,e){return new I(t,e)},e}(s),z=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.initialized=!1,n.initArrow(e),n}return r(e,t),e.prototype.initArrow=function(t){var e=v.createArrowMarker(t,0,null);this.baseSVGElement.setAttribute("marker-end","url(#"+e[0].getAttribute("id")+")"),this.arrowEndHead=e[1]},e.prototype.setDrawStyle=function(e){var r=this,n=r.initialized,i=r.arrowEndHead;n||(r.arrowEndHead=null),t.prototype.setDrawStyle.call(this,e),n||(r.drawStyle.endArrow=1,r.arrowEndHead=i,r.baseSVGElement.setAttribute("marker-end","url(#"+i.parentNode.getAttribute("id")+")"),i.style.fill=e.color,i.style.stroke=e.color,r.initialized=!0)},e.xtype="arrow",e}(x);w.register(z.xtype,z);var B='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><line class="ea-button" style="stroke:url(#easyAnnotatorBtnGradient) #447799;stroke-width:3;" y1="28" x2="28" y2="3"></line><polygon style="fill:url(#easyAnnotatorBtnGradient) #447799;" points="13,7 23,17 30,1"></polygon></svg>',V=function(t){function e(){var e=t.call(this)||this;return e.iconSVG=B,e}return r(e,t),e.prototype.createAnnotator=function(t,e){return new z(t,e)},e}(s),P=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.currentText="Text",n.lastTouchTime=0,n.INITIAL_HEIGHT=40,n.onTouchStart=function(t){var e=t.timeStamp,r=n;e-r.lastTouchTime<600?n.addEditor():r.lastTouchTime=e,t.preventDefault()},n.onTextClick=function(t){n.addEditor()},n.saveEditText=function(){var t=n;t.currentText=t.editorTextArea.value,t.setText(t.currentText),t.hideEditor()},n.hideEditor=function(){n.foreignObject.parentElement.removeChild(n.foreignObject)},n.width=80,n.height=n.INITIAL_HEIGHT,n.x=0,n.y=0,n.createText(e),n.properties=[b.FILL_PROPERTY,b.FONT_PROPERTY],n}return r(e,t),e.prototype.initElement=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.classList.add(t.ui+"-text-sel-rect"),this.svgGroupElement.appendChild(e),this.selectedRect=e},e.prototype.createText=function(t){var e=this,r=document.createElementNS("http://www.w3.org/2000/svg","text");r.classList.add(t.ui+"-svg-text-element"),r.addEventListener("dblclick",e.onTextClick),r.addEventListener("touchstart",e.onTouchStart),e.svgGroupElement.appendChild(r),e.baseSVGElement=r,window.setTimeout((function(){e.setText(e.currentText)}),100)},e.prototype.setSelected=function(e){t.prototype.setSelected.call(this,e),this.selectedRect.style.display=e?"block":"none"},e.prototype.addEditor=function(){for(var t=this,e=t.editorTextArea,r=t.foreignObject,n=t.svgGroupElement.parentElement;"svg"!=n.nodeName.toLowerCase();)n=n.parentElement;if(r)r.parentElement||n.appendChild(r);else{var i=document;r=i.createElementNS("http://www.w3.org/2000/svg","foreignObject"),e=i.createElement("textarea"),r.appendChild(e),n.appendChild(r),t.editorTextArea=e,t.foreignObject=r;var o=i.createElement("div"),a=i.createElement("div"),l=i.createElement("div");o.classList.add(t.config.ui+"-text-ann-btn-container"),o.appendChild(l),o.appendChild(a),a.addEventListener("click",t.saveEditText),a.innerHTML='<svg viewBox="5 7 50 50" xmlns="http://www.w3.org/2000/svg"><path class="ea-button" d="m10.497 32.281c4.2095 3.8308 6.93 7.2788 11.433 15.27 9.789-24.709 23.193-31.053 21.493-32.147-3.4388-2.3075-20.169 17.034-22.192 19.586-2.4332-1.2882-10.733-5.791-10.733-2.7086z" fill="#333" fill-rule="evenodd" stroke="#333" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.875"/></svg>\n',l.addEventListener("click",t.hideEditor),l.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-250 -250 1600 1600"><g><path d="M962.6,962.6c-36.5,36.5-95.7,36.5-132.2,0L500,632.2L169.6,962.6c-36.5,36.5-95.7,36.5-132.2,0c-36.5-36.5-36.5-95.7,0-132.2L367.8,500L37.4,169.6c-36.5-36.5-36.5-95.7,0-132.2s95.7-36.5,132.2,0L500,367.8L830.4,37.4c36.5-36.5,95.7-36.5,132.2,0c36.5,36.5,36.5,95.7,0,132.2L632.2,500l330.4,330.4C999,866.9,999,926,962.6,962.6z"/></g></svg>',r.appendChild(o)}e.innerHTML=this.currentText;var s=n.getBoundingClientRect(),c=s.width.toString();r.setAttribute("width",c),r.setAttribute("height",s.height.toString()),e.style.width=c+"px",e.style.height=s.height-40+"px",r.style.display="block",e.focus(),e.select()},e.prototype.setFillStyle=function(e){t.prototype.setFillStyle.call(this,e),this.baseSVGElement.childNodes.forEach((function(t){t.style.fill=e.color}))},e.prototype.setText=function(t){for(var e,r=t.split(/\n/),n=r.length,i=this.baseSVGElement;i.lastChild;)i.removeChild(i.lastChild);for(e=0;e<n;e++){var o=document.createElementNS("http://www.w3.org/2000/svg","tspan");o.setAttribute("x","0"),o.setAttribute("dy","1.2em"),o.style.fill=this.fillStyle.color,o.innerHTML=r[e],i.appendChild(o)}this.setSelRectSize()},e.prototype.setSelRectSize=function(){var t=this.baseSVGElement.getBBox(),e=this.selectedRect;e.setAttribute("x",t.x.toString()),e.setAttribute("y",t.y.toString()),e.setAttribute("width",t.width.toString()),e.setAttribute("height",t.height.toString())},e.prototype.setDrawStyle=function(t){},e.prototype.setStrokeWidth=function(t){},e.prototype.setFont=function(t){var e=this.baseSVGElement;e.style.fontFamily=t.name,e.style.fontSize=t.size+"px",e.style.fontStyle=t.italic?"italic":"normal",e.style.fontWeight=t.bold?"bold":"normal",this.setSelRectSize()},e.prototype.toXML=function(){var t=document.createElementNS(null,e.xtype);this._toXML(t),t.setAttribute("t",this.currentText);var r=this.baseSVGElement.style;return t.setAttribute("fn",r.fontFamily),t.setAttribute("fs",parseInt(r.fontSize,10)+""),t.setAttribute("fi","italic"==r.fontStyle?"1":"0"),t.setAttribute("fb","bold"==r.fontWeight?"1":"0"),t},e.prototype.fromXML=function(e){var r=this;r.width=r.getXMLNumber(e,"w"),r.height=r.getXMLNumber(e,"h"),r.currentText=e.getAttribute("t")||"Text",r.loadXMLDraw(e),r.loadXMLFill(e);var n=parseInt(e.getAttribute("fs"),10);isNaN(n)&&(n=24);var i={name:e.getAttribute("fn")||"Arial",italic:"1"===e.getAttribute("fi"),bold:"1"===e.getAttribute("fb"),size:n};setTimeout((function(){r.setFont(i)}),50),t.prototype.moveBy.call(this,r.getXMLNumber(e,"x"),r.getXMLNumber(e,"y"),null)},e.prototype.toJSON=function(){var r=t.prototype.toJSON.call(this);r.xtype=e.xtype,delete r.w,delete r.h,r.t=this.currentText;var n=this.baseSVGElement.style;return r.fn=n.fontFamily,r.fs=parseInt(n.fontSize,10),r.fi="italic"==n.fontStyle?1:0,r.fb="bold"==n.fontWeight?1:0,r},e.prototype.fromJSON=function(e){var r=this;if(r.x=0,r.y=0,e.w&&(r.width=e.w),e.h&&(r.height=e.h),r.loadJSONDraw(e),r.loadJSONFill(e),e.t&&(r.currentText=e.t),e.fn){var n={name:e.fn||"Arial",italic:!!e.fi,bold:!!e.fb,size:e.fs||24};setTimeout((function(){r.setFont(n)}),50)}t.prototype.moveBy.call(this,e.x,e.y,null)},e.prototype.clean=function(){if(this.foreignObject){for(var t=this.svgGroupElement.parentElement;"svg"!=t.nodeName.toLowerCase();)t=t.parentElement;t.removeChild(this.foreignObject)}},e.xtype="text",e}(I);w.register(P.xtype,P);var H='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t viewBox="0 0 25.531 25.531" style="enable-background:new 0 0 25.531 25.531;" xml:space="preserve">\r\n<g>\r\n\t<g>\r\n\t\t<path class="ea-button" d="M25.198,6.273c-0.014,0.23-0.045,0.389-0.087,0.467c-0.045,0.084-0.176,0.145-0.392,0.183\r\n\t\t\tc-0.469,0.104-0.781-0.074-0.935-0.533C23.239,4.7,22.59,3.578,21.84,3.016c-1.041-0.773-2.862-1.161-5.469-1.161\r\n\t\t\tc-1.054,0-1.633,0.115-1.734,0.343c-0.036,0.075-0.057,0.184-0.057,0.324v18.999c0,0.812,0.188,1.383,0.571,1.709\r\n\t\t\tc0.382,0.32,1.069,0.731,2.201,0.999c0.483,0.103,0.97,0.2,1.034,0.239c0.46,0,0.504,1.057-0.376,1.057\r\n\t\t\tc-0.025,0.016-10.375-0.008-10.375-0.008s-0.723-0.439-0.074-1.023c0.271-0.121,0.767-0.343,0.767-0.343s1.83-0.614,2.211-1.009\r\n\t\t\tc0.434-0.445,0.648-1.164,0.648-2.154V2.521c0-0.369-0.229-0.585-0.687-0.647c-0.049-0.015-0.425-0.02-1.122-0.02\r\n\t\t\tc-2.415,0-4.191,0.418-5.338,1.259C3.176,3.735,2.411,4.877,1.737,6.545C1.52,7.065,1.22,7.234,0.84,7.058\r\n\t\t\tC0.408,6.957,0.251,6.719,0.363,6.353c0.445-1.374,0.668-3.31,0.668-5.814c0-0.292,0.387-0.586,1.163-0.533L23.56,0.064\r\n\t\t\tc0.709-0.104,1.096,0.012,1.16,0.343C25.076,2.096,25.234,4.052,25.198,6.273z"/>\r\n\t</g>\r\n</g>\r\n</svg>\r\n',G=function(t){function e(){var e=t.call(this)||this;return e.iconSVG=H,e}return r(e,t),e.prototype.createAnnotator=function(t,e){return new P(t,e)},e}(s),F=function(t){function e(r,n){var i=t.call(this,r,n)||this;return i.direction=e.DIRECTION_BOTTOM,i.onResizeTouchStart=function(t){var e=t.changedTouches[0];i.onResizePress(e)},i.onResizeMouseDown=function(t){i.onResizePress(t)},i.addResizeElements(r),i}return r(e,t),e.prototype.initElement=function(t){var e=this,r=document;e.width=200*t.sizePercentage,e.height=150*t.sizePercentage,e.bottom=.65*e.height,e.right=e.width;var n=r.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",t.ui+"-annotator-callout-shadow");var i=r.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("class",t.ui+"-annotator-callout"),e.svgGroupElement.appendChild(n),e.svgGroupElement.appendChild(i),e.shadowPathElement=n,e.baseSVGElement=i;var o=r.createElementNS("http://www.w3.org/2000/svg","filter");o.id="calloutFilter258",o.innerHTML='<feGaussianBlur stdDeviation="6.5873096"/>',v.addToDefs(t,o),e.calloutHeadX=.1127*e.width,e.calloutHeadY=.9725*e.height,e.resize()},e.prototype.resize=function(){var t=this,r=t.x,n=t.y,i=t.right,o=t.bottom,a=Math.min(10,Math.min(.08*i,.08*o)),l=.2*a,s=.6*a,c=n+a,d=i-a,p="C "+(r+a/10)+","+(n+s)+" "+(r+l)+","+(n+l)+" "+(r+a)+","+n,u="C "+(i-s)+","+(n+.1*a)+" "+(i-l)+","+(n+l)+" "+(i-.1*a)+","+(n+s),h="C "+(i-a/10)+","+(o-s)+" "+(i-l)+","+(o-l)+" "+d+","+o,g="C "+(r+.9*a)+","+(o-.1*a)+" "+(r+l)+","+(o-l)+" "+(r+.1*a)+","+(o-.9*a),f=null;switch(t.direction){case e.DIRECTION_TOP:f="M "+r+","+c+" "+p+" L "+(r+.418*(i-r))+","+n+" L "+t.calloutHeadX+","+t.calloutHeadY+" L "+(r+.574*(i-r))+","+n+" L "+d+","+n+" "+u+" L "+i+","+(o-a)+" "+h+" L "+(r+a)+","+o+" "+g+" L "+r+","+c+" z";break;case e.DIRECTION_RIGHT:f="M "+r+","+c+" "+p+" L "+d+","+n+" "+u+" L "+i+","+(n+.418*(o-n))+" L "+t.calloutHeadX+","+t.calloutHeadY+" "+i+","+(n+.574*(o-n))+" L "+i+","+(o-a)+" "+h+" L "+(r+a)+","+o+" "+g+" L "+r+","+c+" z";break;case e.DIRECTION_BOTTOM:f="M "+r+","+c+" "+p+" L "+d+","+n+" "+u+" L "+i+","+(o-a)+" "+h+" L "+(r+.5737*(i-r))+","+o+" L "+t.calloutHeadX+","+t.calloutHeadY+" L "+(r+.418*(i-r))+","+o+" L "+(r+a)+","+o+" "+g+" L "+r+","+c+" z";break;case e.DIRECTION_LEFT:f="M "+r+","+c+" "+p+" L "+d+","+n+" "+u+" L "+i+","+(o-a)+" "+h+" L "+(r+a)+","+o+" "+g+" L "+r+","+(n+.574*(o-n))+" L "+t.calloutHeadX+","+t.calloutHeadY+" "+r+","+(n+.418*(o-n))+" L "+r+","+c+" z"}f&&(t.baseSVGElement.setAttribute("d",f),t.shadowPathElement.setAttribute("d",f)),t.points?t.points.length=0:t.points=[];var m=r+i/2,v=n+o/2;t.points.push(new A(m,v)),t.points.push(new A(2e4,t.getNextPoint(m,v,r+i,n,2e4))),t.points.push(new A(2e4,t.getNextPoint(m,v,r+i,n+o,2e4))),t.points.push(new A(-2e4,t.getNextPoint(m,v,r,n+o,-2e4))),t.points.push(new A(-2e4,t.getNextPoint(m,v,r,n,-2e4)))},e.prototype.getNextPoint=function(t,e,r,n,i){return(n-e)/(r-t)*(i-t)+e},e.prototype.addResizeElements=function(t){for(var e=0;e<5;e++){var r=this.createResizeElement(t);this.resizeElements.push(r),this.addResizeEvents(r),this.svgGroupElement.appendChild(r)}this.arrangeResizeElements()},e.prototype.onResizePress=function(t){var e=this,r=t.target,n=e.resizeElements.length;e.screenX=t.screenX,e.screenY=t.screenY,e.dragStartW=e.right,e.dragStartH=e.bottom,e.dragStartX=e.x,e.dragStartY=e.y;for(var i=0;i<n;i++)if(r==e.resizeElements[i]){e.currentResizeIndex=i,e.calloutDragX=e.calloutHeadX,e.calloutDragY=e.calloutHeadY;break}},e.prototype.arrangeResizeElements=function(){var t=this,e=t.RESIZE_ELEM_SIZE/2,r=t.x-e,n=t.right-e,i=t.y-e,o=t.bottom-e;t.arrangeElement(t.resizeElements[0],r,i),t.arrangeElement(t.resizeElements[1],n,i),t.arrangeElement(t.resizeElements[2],n,o),t.arrangeElement(t.resizeElements[3],r,o),t.arrangeElement(t.resizeElements[4],t.calloutHeadX,t.calloutHeadY)},e.prototype.moveBy=function(r,n,i){var o=this,a=o.currentResizeIndex;if(a>=0){var l=i.screenX-o.screenX,s=i.screenY-o.screenY;switch(a){case 0:o.x=o.dragStartX+l,o.y=o.dragStartY+s;break;case 1:o.y=o.dragStartY+s,o.right=o.dragStartW+l;break;case 2:o.right=o.dragStartW+l,o.bottom=o.dragStartH+s;break;case 3:o.x=o.dragStartX+l,o.bottom=o.dragStartH+s;break;case 4:o.calloutHeadX=o.calloutDragX+l,o.calloutHeadY=o.calloutDragY+s;var c=o.points[0],d=new A(o.calloutHeadX,o.calloutHeadY);o.pointInTriangle(d,c,o.points[1],o.points[2])?o.direction=e.DIRECTION_RIGHT:o.pointInTriangle(d,c,o.points[2],o.points[3])?o.direction=e.DIRECTION_BOTTOM:o.pointInTriangle(d,c,o.points[3],o.points[4])?o.direction=e.DIRECTION_LEFT:o.pointInTriangle(d,c,o.points[4],o.points[1])&&(o.direction=e.DIRECTION_TOP)}o.baseSVGElement.setAttribute("x",o.x.toString()),o.baseSVGElement.setAttribute("y",o.y.toString())}else t.prototype.moveBy.call(this,r,n,i);o.arrangeResizeElements(),o.resize()},e.prototype.sign=function(t,e,r){return(t.x-r.x)*(e.y-r.y)-(e.x-r.x)*(t.y-r.y)},e.prototype.pointInTriangle=function(t,e,r,n){var i,o,a;return i=this.sign(t,e,r),o=this.sign(t,r,n),a=this.sign(t,n,e),!((i<0||o<0||a<0)&&(i>0||o>0||a>0))},e.prototype.setDrawColor=function(t){this.baseSVGElement.style.stroke=t},e.prototype.setFillColor=function(t){this.baseSVGElement.style.fill=t},e.prototype.toJSON=function(){var r=this,n=t.prototype.toJSON.call(this);return n.xtype=e.xtype,n.dx=n.x,n.dy=n.y,n.x=r.x,n.y=r.y,n.r=r.right,n.b=r.bottom,n.cx=r.calloutHeadX,n.cy=r.calloutHeadY,n.d=r.direction,n},e.prototype.fromJSON=function(e){var r=this;t.prototype.fromJSON.call(this,e),r.right=e.r,r.bottom=e.b,r.calloutHeadX=e.cx,r.calloutHeadY=e.cy,r.direction=e.d,r.moveBy(e.dx-e.x,e.dy-e.y,null),r.resize()},e.prototype.toXML=function(){var t=document.createElementNS(null,e.xtype),r=this;return r._toXML(t),t.setAttribute("dx",t.getAttribute("x")),t.setAttribute("dy",t.getAttribute("y")),t.setAttribute("x",r.x.toString()),t.setAttribute("y",r.y.toString()),t.setAttribute("r",r.right.toString()),t.setAttribute("b",r.bottom.toString()),t.setAttribute("cx",r.calloutHeadX.toString()),t.setAttribute("cy",r.calloutHeadY.toString()),t.setAttribute("d",r.direction.toString()),t},e.prototype.fromXML=function(e){t.prototype.fromXML.call(this,e);var r=this;r.right=r.getXMLNumber(e,"r"),r.bottom=r.getXMLNumber(e,"b"),r.calloutHeadX=r.getXMLNumber(e,"cx"),r.calloutHeadY=r.getXMLNumber(e,"cy"),r.direction=r.getXMLNumber(e,"d"),r.moveBy(r.getXMLNumber(e,"dx")-r.x,r.getXMLNumber(e,"dy")-r.y,null),r.resize()},e.DIRECTION_TOP=1,e.DIRECTION_RIGHT=2,e.DIRECTION_BOTTOM=3,e.DIRECTION_LEFT=4,e.xtype="callout",e}(I);w.register(F.xtype,F);var _='<svg\n   viewBox="0 0 488 473"\n   aria-hidden="true" focusable="false" data-prefix="fas" data-icon="palette" \n   xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg">\n  <defs><filter id="filter3746"><feGaussianBlur stdDeviation="6.5873096"/></filter></defs>\n  <path class="ea-button"\n     d="M 38,44 C 38,44 488,43 486,43 C 485,43 485,319 485,319 L 296,319 L 71,473 L 220,321 L 38,323 L 38,44 z"\n     style="fill:#000000;fill-opacity:0.5;fill-rule:evenodd;stroke:none;stroke-width:2.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;filter:url(#filter3746)" />\n  <path class="ea-button"\n     d="M 22,31 C 22,31 471,30 470,30 C 469,30 469,306 469,306 L 280,306 L 55,460 L 204,308 L 22,310 L 22,31 z"\n     style="fill-rule:evenodd;stroke-linecap:butt;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1" />\n</svg>',X=function(t){function e(){var e=t.call(this)||this;return e.iconSVG=_,e}return r(e,t),e.prototype.createAnnotator=function(t,e){return new F(t,e)},e}(s),W=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.blur="0",n.opacity="1",n.onFileUpload=function(t){var e=new FileReader,r=n;if(r.uploadInput.files.length){r.createImageElement();var i=r.imageSVGElement,o=r.uploadInput.files[0];if(o.name&&!o.name.match(/.png$|.jpg$|.jpeg$|.gif$|.bmp$/i))return r.baseSVGElement.classList.add("shake"),window.setTimeout((function(){r.baseSVGElement.classList.remove("shake")}),1500),!1;e.onloadend=function(){i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.result.toString())},r.svgGroupElement.style.zIndex="0",e.readAsDataURL(o);var a=r.svgGroupElement;a.removeChild(r.foreignObject),a.insertBefore(i,r.baseSVGElement),r.foreignObject=null}},n.properties=[b.BLUR_PROPERTY],n.attachUploadInput(),n}return r(e,t),e.prototype.attachUploadInput=function(){var t=document.createElement("input"),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject"),r=this;e.innerHTML='<div style="height: 100%;display:flex;position:absolute;width:100%;">                <svg style="width:100%;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 165 35">                    <text style="fill:black;" dy="1.5em">Click here or drag image</text>                </svg></div>',e.appendChild(t),t.setAttribute("type","file"),t.className="image-uploader",r.svgGroupElement.appendChild(e),e.setAttribute("width",r.width.toString()),e.setAttribute("height",r.height.toString()),e.addEventListener("change",r.onFileUpload),r.foreignObject=e,r.uploadInput=t},e.prototype.createImageElement=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","image"),e=this;t.setAttribute("x",e.x.toString()),t.setAttribute("y",e.y.toString()),t.setAttribute("width",e.width.toString()),t.setAttribute("height",e.height.toString()),t.setAttribute("draggable","false"),e.imageSVGElement=t},e.prototype.arrangeResizeElements=function(){t.prototype.arrangeResizeElements.call(this);var e=this,r=e.foreignObject,n=e.imageSVGElement;n?(n.setAttribute("x",e.x.toString()),n.setAttribute("y",e.y.toString()),n.setAttribute("width",e.width.toString()),n.setAttribute("height",e.height.toString())):r&&(r.setAttribute("x",e.x.toString()),r.setAttribute("y",e.y.toString()),r.setAttribute("width",e.width.toString()),r.setAttribute("height",e.height.toString()))},e.prototype.setBlur=function(t){var e=this.imageSVGElement;this.blur=t.toString(),e&&(e.style.filter="blur("+t+"px)")},e.prototype.getBlur=function(){return this.blur},e.prototype.setOpacity=function(t){var e=this.imageSVGElement;this.opacity=t.toString(),e&&(e.style.opacity=this.opacity)},e.prototype.getOpacity=function(){return this.opacity},e.prototype.setDrawColor=function(t){this.baseSVGElement.style.stroke="transparent"},e.prototype.setFillColor=function(t){this.baseSVGElement.style.fill="transparent"},e.prototype.setSelected=function(e){t.prototype.setSelected.call(this,e),this.baseSVGElement.style.stroke=e?"#000":"transparent"},e.prototype.toXML=function(){var t=document.createElementNS(null,e.xtype);return t.setAttribute("i",this.imageSVGElement.getAttributeNS("http://www.w3.org/1999/xlink","href")),t.setAttribute("o",this.opacity),t.setAttribute("b",this.blur),this._toXML(t),t},e.prototype.fromXML=function(e){t.prototype.fromXML.call(this,e);var r=e.getAttribute("i"),n=this,i=n.svgGroupElement;if(i.removeChild(n.foreignObject),r){n.createImageElement();var o=n.imageSVGElement;i.insertBefore(o,n.baseSVGElement),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r)}if(r=e.getAttribute("o")){var a=parseFloat(r);a>=0&&a<=1&&n.setOpacity(a)}r=e.getAttribute("b");var l=parseFloat(r);l>=0&&n.setBlur(l)},e.prototype.toJSON=function(){var r=t.prototype.toJSON.call(this);return r.xtype=e.xtype,r.i=this.imageSVGElement.getAttributeNS("http://www.w3.org/1999/xlink","href"),r.o=this.opacity,r.b=this.blur,r},e.prototype.fromJSON=function(e){var r=this,n=r.svgGroupElement;if(e.i){t.prototype.fromJSON.call(this,e),n.removeChild(r.foreignObject),r.createImageElement();var i=r.imageSVGElement;n.insertBefore(i,r.baseSVGElement),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.i),r.setOpacity(e.o),r.setBlur(e.b)}},e.xtype="image",e}(I);w.register(W.xtype,W);var Y='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path class="ea-button" d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z"></path></svg>',U=function(t){function e(){var e=t.call(this)||this;return e.iconSVG=Y,e.title="Add Picture",e}return r(e,t),e.prototype.createAnnotator=function(t,e){return new W(t,e)},e}(s),J=function(t){function e(r,n){var i=t.call(this,r,n)||this;i.blur="2";var o=i.baseSVGElement,a=document.createElementNS("http://www.w3.org/2000/svg","filter"),l=r.annotatorIdx+"_"+e.BLURING_ID,s="bluringFilter"+l;o.classList.add("blur-rect"),o.setAttribute("filter","url(#"+s+")"),a.setAttribute("id",s),a.setAttribute("filterUnits","userSpaceOnUse"),a.setAttribute("width","110%"),a.setAttribute("height","110%"),a.innerHTML='<feGaussianBlur stdDeviation="2"/>',v.addToDefs(r,a);var c,d,p=document.createElementNS("http://www.w3.org/2000/svg","pattern"),u=v.getDefs(r).getElementsByTagName("pattern"),h=u.length;for(s="bluringPattern"+l,p.id=s,c=0;c<h;c++)if((d=u[c]).id=="mainFillPattern"+r.annotatorIdx){p.innerHTML=d.innerHTML,p.setAttribute("patternUnits","userSpaceOnUse"),p.setAttribute("width",d.getAttribute("width")),p.setAttribute("height",d.getAttribute("height"));break}return v.addToDefs(r,p),e.BLURING_ID++,o.setAttribute("fill","url(#"+s+")"),i.bluringFilter=a,i.imagePattern=p,i.properties=[b.BLUR_PROPERTY],i}return r(e,t),e.prototype.moveBy=function(e,r,n){t.prototype.moveBy.call(this,e,r,n);var i=this,o=i.bluringFilter,a=i.imagePattern;o.setAttribute("x",i.x.toString()),o.setAttribute("y",i.y.toString());var l=i.svgGroupElement.transform.baseVal.getItem(0).matrix;a.setAttribute("x",(-l.e).toString()),a.setAttribute("y",(-l.f).toString())},e.prototype.setDrawStyle=function(t){},e.prototype.setFillStyle=function(t){},e.prototype.setBlur=function(t){this.blur=t.toString(),this.bluringFilter.getElementsByTagName("feGaussianBlur")[0].setAttribute("stdDeviation",this.blur)},e.prototype.getBlur=function(){return this.blur},e.prototype.clean=function(){var t=this,e=v.getDefs(t.config);t.bluringFilter&&e.removeChild(t.bluringFilter),t.imagePattern&&e.removeChild(t.imagePattern)},e.prototype.isOnTop=function(){return!0},e.prototype.toXML=function(){var r=document.createElementNS(null,e.xtype);return t.prototype._toXML.call(this,r),r.setAttribute("b",this.blur),r},e.prototype.fromXML=function(e){t.prototype.fromXML.call(this,e);var r=parseFloat(e.getAttribute("b"));(isNaN(r)||r<0||r>200/15)&&(r=0),this.blur=r.toString(),this.bluringFilter.getElementsByTagName("feGaussianBlur")[0].setAttribute("stdDeviation",this.blur)},e.prototype.toJSON=function(){var r=t.prototype.toJSON.call(this);return r.xtype=e.xtype,r.b=this.blur,r},e.prototype.fromJSON=function(e){if(t.prototype.fromJSON.call(this,e),e.b){var r=parseFloat(e.b);(isNaN(r)||r<0||r>200/15)&&(r=0),this.blur=r.toString()}},e.xtype="blur",e.BLURING_ID=1,e}(I);w.register(J.xtype,J);var j,Z='<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="image" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\r\n  <defs>\r\n    <filter id="bluring" width="60%" x="40%">\r\n      <feGaussianBlur stdDeviation="50" filterUnits="objectBoundingBox"/>\r\n    </filter>\r\n  </defs>\r\n<path class="ea-button" filter="url(#bluring)" d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z"></path>\r\n<path class="ea-button" d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z"></path>\r\n</svg>',q=function(t){function e(){var e=t.call(this)||this;return e.iconSVG=Z,e.title="Blur Image",e}return r(e,t),e.prototype.createAnnotator=function(t,e){return new J(t,e)},e}(s),K=function(t){function e(e,r,n){var i=t.call(this,e,r,null,n)||this;return i.toolbarItemClickHandler=function(t,e){var r=e,n=i;r.isEnabled()&&r.invoke(n.config,n.parent.getSelectedItems())},i.config=e,i.itemClickHandler=i.toolbarItemClickHandler,i}return r(e,t),e.prototype.getUIElement=function(e,r){var n=this,i=t.prototype.getUIElement.call(this,e,r);return i.onclick=function(t){t.stopPropagation(),f.getOpenDialog()&&f.getOpenDialog().hide(),n.itemClickHandler.call(n,t,r)},i},e.prototype.setSelectedItems=function(t){var e,r;try{for(var i=n(this.items),o=i.next();!o.done;o=i.next()){var a=o.value;a.setEnabled(a.canHandle(t))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},e}(m),$=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enabled=!0,e}return r(e,t),e.prototype.canHandle=function(t){var e,r,i=this.xtype;try{for(var o=n(t),a=o.next();!a.done;a=o.next())if(a.value.getProperties().indexOf(i)>=0)return!0}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return!1},e.prototype.setEnabled=function(t){t!=this.enabled&&(this.enabled=t,t?this.element.classList.remove("btn-disabled"):this.element.classList.add("btn-disabled"))},e.prototype.isEnabled=function(){return this.enabled},e}(l),Q=-1e4,tt=function(){function t(t,e,r,i){var o,a,l,s,c=this;this.editable=!1,this.multiOptions=!1,this.mouseOverTimeout=0,this.subDropDownVisible=!1,this.onSubOptionsOver=function(t){var e=c;e.mouseOverTimeout&&(window.clearTimeout(e.mouseOverTimeout),e.mouseOverTimeout=0)},this.onOptionEvent=function(t){var e,r=t.target,n="touchend"==t.type,i="mouseover"==t.type||n,o=c;for(t.stopPropagation();r.className.indexOf("option")<0;)r=r.parentElement;if("1"===r.getAttribute("hasSubDropdDown")){if(o.subDropDownVisible=!0,e=r.getElementsByClassName("subdrop-down")[0],g.isPhone())return void window.setTimeout((function(){e.style.display="",e.classList.add("mobile-show-elem")}),300);if(!i)return void(o.mouseOverTimeout=window.setTimeout((function(){e.style.display="none"}),500));var a=o.mouseOverTimeout;if(a||n){a&&(window.clearTimeout(a),o.mouseOverTimeout=0);for(var l=r.parentElement.firstChild,s=void 0;l;)l!=r&&(s=l.getElementsByClassName("subdrop-down")).length&&(s[0].style.display="none"),l=l.nextSibling}e.style.display=i?"inline-block":"none"}else o.multiOptions&&o.removeMobileCls()},this.checkContainer=function(){for(var t=c,e=t.container.parentElement,r=document.body;e;){if(e==r)return;e=e.parentElement}t.subDropDownVisible=!1,t.removeMobileCls(),t.intervalID>0&&(window.clearInterval(t.intervalID),t.intervalID=0),t.clearListeners()},this.onBackButton=function(t){var e=c;e.subDropDownVisible?(e.removeMobileCls(null,"mobile-hide-elem"),window.setTimeout((function(){e.removeMobileCls("mobile-hide-elem")}),1e3)):(g.isPhone()&&e.optionsContainer.parentElement.removeChild(e.optionsContainer),e.clearListeners())},this.clearListeners=function(){g.isMobileDevice()?window.removeEventListener("touchstart",c.hideDropDown,!1):window.removeEventListener("click",c.hideDropDown,!1)},this.onDropDownClick=function(t){var e=c,r=document.body,n=e.optionsContainer;n.parentElement||(g.isPhone()?(r.appendChild(n),r.style.overflow="hidden"):e.container.appendChild(n)),t.stopPropagation(),n.style.display="block";var i=n.parentElement.getBoundingClientRect(),o=n.getBoundingClientRect();i.top+o.height>window.innerHeight?n.style.top=-(o.height+i.height)+"px":n.style.top="0",e.intervalID=window.setInterval(e.checkContainer,1e3),window.setTimeout((function(t){g.isMobileDevice()?window.addEventListener("touchstart",t.hideDropDown,{passive:!1}):window.addEventListener("click",t.hideDropDown,!1)}),500,e)},this.closeDropDown=function(t){t.preventDefault();var e=c;e.optionsContainer.parentElement.removeChild(e.optionsContainer),e.clearListeners()},this.hideDropDown=function(t){for(var e=c,r=e.optionsContainer,n=t?t.target:null,i=e.intervalID;n;){if(n==r)return;n=n.parentElement}i>0&&(window.clearInterval(i),e.intervalID=0),r.parentElement&&r.parentElement.removeChild(r),e.clearListeners()},this.selectOption=function(t){var e=c;t.preventDefault(),t.stopPropagation(),g.isPhone()&&e.optionsContainer.parentElement&&e.optionsContainer.parentElement.removeChild(e.optionsContainer);for(var r=t.target;!r.getAttribute("optIndex");)r=r.parentElement;for(var n,i,o=r.getAttribute("optValue"),a=r.parentElement.childNodes,l=a.length,s=r.getElementsByTagName("div"),d=r.parentElement;d&&d.className.indexOf("subdrop-down")<0;)d=d.parentElement;if(t.detail!=Q&&d&&(d.style.display="none"),e.multiOptions){for(n=0;n<l;n++)a[n]!=r&&(i=a[n].getElementsByClassName("checked")).length&&(i[0].className="");s[s.length-1].className="checked"}e.selectedIndex=parseInt(r.getAttribute("optIndex"),10),e.multiOptions||(e.editable?e.valueDiv.firstChild.value=r.innerHTML:e.valueDiv.innerHTML=r.innerHTML),e.onchange&&e.onchange(e.selectedIndex,o,e.multiOptions?parseInt(r.parentElement.getAttribute("subIndex"),10):0),e.onclose&&e.onclose(),t.detail!=Q&&(e.hideDropDown(null),window.clearInterval(e.intervalID),e.intervalID=0)};var d=document,p=d.createElement("div"),u=d.createElement("div"),h=g.isMobileDevice(),f=g.isPhone(),m=0,v=this;p.className=t.ui+"-drop-down"+(r?" "+r:""),u.className="options-container",f&&(u.classList.add("mobile-dropdown-container"),u.classList.add(t.ui+"-mobile-dropdown-container"),u.addEventListener("touchmove",(function(t){t.preventDefault()}))),i||(i=""),i+=" value",p.innerHTML='<div class="body"><div class="'+i+'"></div><div class="arrow"></div></div>';try{for(var y=n(e),w=y.next();!w.done;w=y.next()){var b=w.value;if(Array.isArray(b)){if(this.multiOptions=!0,b.length>0){var x;(x=d.createElement("div")).setAttribute("optIndex",m.toString()),x.setAttribute("hasSubDropdDown","1"),x.className="option",h?x.addEventListener("touchend",v.onOptionEvent,{passive:!1}):(x.addEventListener("mouseover",v.onOptionEvent),x.addEventListener("mouseout",v.onOptionEvent)),x.innerHTML='<div class="sub-item">'+b[0]+'<div class="right-arrow"></div></div>',u.appendChild(x);var S=d.createElement("div");S.className="subdrop-down",f&&S.classList.add("mobile-sub-dropdown"),S.setAttribute("subIndex",m.toString()),S.addEventListener("mouseover",v.onSubOptionsOver);var E=!0,k=0;try{for(var A=(l=void 0,n(b)),L=A.next();!L.done;L=A.next()){var C=L.value;if(E)E=!1;else{var D=d.createElement("div");D.setAttribute("optIndex",k.toString()),D.setAttribute("optValue",C),D.className="option",f&&D.classList.add("mobile-sub-option"),D.innerHTML='<div class="padding"></div>'+C+'<div class=""></div>',h?D.addEventListener("touchend",v.selectOption,{passive:!1}):D.addEventListener("click",v.selectOption,!1),S.appendChild(D),k++}}}catch(t){l={error:t}}finally{try{L&&!L.done&&(s=A.return)&&s.call(A)}finally{if(l)throw l.error}}x.firstChild.appendChild(S)}}else(x=d.createElement("div")).setAttribute("optIndex",m.toString()),x.className="option",x.innerHTML=b,x.setAttribute("optValue",b),h?x.addEventListener("touchend",v.selectOption,{passive:!1}):x.addEventListener("click",v.selectOption,!1),u.appendChild(x);m++}}catch(t){o={error:t}}finally{try{w&&!w.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}if(h?p.firstChild.addEventListener("touchstart",v.onDropDownClick,{passive:!1}):p.firstChild.addEventListener("click",v.onDropDownClick,!1),v.valueDiv=p.getElementsByClassName(i)[0],f||p.appendChild(u),v.container=p,v.optionsContainer=u,f){var M=d.createElement("div");M.className=t.ui+"-mobile-buttons",u.insertBefore(M,u.firstChild);var T=d.createElement("div");if(v.multiOptions){var N=d.createElement("div");N.className="back-button",M.appendChild(N),N.addEventListener("touchstart",v.onBackButton,{passive:!1})}T.className="close-button",M.appendChild(T),T.addEventListener("touchend",v.closeDropDown)}}return t.prototype.setSelectedIndex=function(t,e){var r=this,n=g.isPhone();if(void 0===e)(t<0||t>r.optionsContainer.childNodes.length)&&(t=0),r.selectedIndex=t,r.multiOptions||(n&&t++,r.valueDiv.innerHTML=r.optionsContainer.childNodes[t].innerHTML),r.onchange&&r.onchange(r.selectedIndex);else{var i=r.optionsContainer.childNodes;(t<0||t>=i.length)&&(t=0),n&&t++;var o=i[t].getElementsByClassName("subdrop-down")[0].childNodes;(e<0||e>=o.length)&&(e=0);var a=new MouseEvent("click",{detail:Q});o[e].dispatchEvent(a)}},t.prototype.removeMobileCls=function(t,e){if(g.isPhone()){t||(t="mobile-show-elem");var r=this.optionsContainer.getElementsByClassName(t),n=void 0,i=r.length,o=void 0;for(n=0;n<i;n++)(o=r[n]).classList.remove(t),e?o.classList.add(e):o.style.display="none"}},t.prototype.getElement=function(){return this.container},t.prototype.setEditable=function(t){var e,r,n=this;if(n.editable!=t)if(n.editable=t,t){n.valueDiv.innerHTML='<input type="text"/>';var i=n.valueDiv.firstChild;i.addEventListener(g.isMobileDevice()?"touchstart":"click",(function(t){t.stopPropagation()})),e=i,r=function(t){return/^\d*$/.test(t)},["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach((function(t){e.oldValue="",e.addEventListener(t,(function(){r(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd,n.onchange&&n.onchange(-1,this.value)):this.hasOwnProperty("oldValue")&&(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd))}))}))}else n.valueDiv.innerHTML=""},t.prototype.isOpen=function(){return this.intervalID>0},t}(),et=function(){function t(t,e){var r=this;this.docEventsAdded=!1,this.changeVisibility=function(t){t.preventDefault(),t.stopPropagation(),r.bodyElement.classList.contains("ea-picker-visible")?r.hide():(r.setColorInternal(r.originalColor),r.show())},this.onPickerDown=function(t){var e=t.target;r.isColorSlider=e.id.indexOf("transp")<0,r.addDocEvents(),t.preventDefault()},this.addDocEvents=function(){r.docEventsAdded||(r.docEventsAdded=!0,g.on(document,["mouseup","touchend","touchcancel"],r.transparencyEvt),g.on(document,["mousemove","touchmove"],r.docMouseMove))},this.transparencyEvt=function(t){t.preventDefault();var e=t.type,n=t.target;if(n.className.indexOf("ea-slider-picker")>=0&&(n=n.parentElement.querySelector("div.ea-slider")),"mousemove"!=e||0!=t.buttons&&r.isColorSlider==n.id.indexOf("transp")<0){if("mousedown"==e)r.addDocEvents(),r.isColorSlider=n.id.indexOf("transp")<0;else if("mouseup"==e||"touchend"==e||"touchcancel"==e)return r.docEventsAdded=!1,g.un(document,["mouseup","touchend","touchcancel"],r.transparencyEvt),void g.un(document,["mousemove","touchmove"],r.docMouseMove);var i=g.getEvent(t);if(i){var o=n.getBoundingClientRect().left;r.isColorSlider?r.colorSlider(i.clientX-o):r.transparencySlider(i.clientX-o)}}},this.docMouseMove=function(t){var e=g.getEvent(t),n=r.transparencyPicker.parentElement.getBoundingClientRect().left,i=e.pageX-n;r.isColorSlider?r.colorSlider(i):r.transparencySlider(i)},this.paletteClick=function(t){if("mousemove"!=t.type||0!=t.buttons){t.preventDefault();var e=g.getEvent(t);if(e){var n=e.target;n==r.hueValPicker&&(n=n.parentElement);var i=r.paletteDiv,o=i.getBoundingClientRect(),a=Math.max(0,Math.min(o.width,e.clientX-o.left)),l=Math.max(0,Math.min(o.height,e.clientY-o.top)),s=a/i.clientWidth,c=l/i.clientHeight,d=Math.round(100*s),p=Math.round(Math.max(100-100*c,0));r.hsvColor[1]=d,r.hsvColor[2]=p;var u=r.hsvToRgb(r.hsvColor[0],d,p);r.color="#"+r.getHex(u[0].toString(16))+r.getHex(u[1].toString(16))+r.getHex(u[2].toString(16)),r._setColor(r.color+r.alpha.toString(16)),r.hueValPicker.style.left=a-9+"px",r.hueValPicker.style.top=l-9+"px"}}},this.hidePicker=function(t){for(var e=t.target,n=r.bodyElement;e;){if(e==n)return;if(!(e instanceof HTMLElement))break;e=e.parentElement}r.onCancel()},this._setColor=function(t){var e,i;r.hueValPicker.style.backgroundColor=t,r.sampleDiv.style.backgroundColor=t,r.target.style.backgroundColor=t;try{for(var o=n(r.listeners.change),a=o.next();!a.done;a=o.next()){var l=a.value;l.fn.call(l.caller,t)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}},this.on=function(t,e,n){r.listeners[t].push({fn:e,caller:n})},this.un=function(t,e){var n=-1;r.listeners[t].forEach((function(t,r){if(t.fn==e)return n=r,!1})),n>=0&&r.listeners[t].splice(n,1)},this.swatchClick=function(t){r.setColorInternal(t.target.getAttribute("data-color"))},this.onSave=function(){var t,e,i=r.color;r.originalColor=i,r.alpha<255&&7==i.length&&(i+=r.getHex(r.alpha.toString(16)));try{for(var o=n(r.listeners.save),a=o.next();!a.done;a=o.next()){var l=a.value;l.fn.call(l.caller,i)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}r.hide()},this.onCancel=function(){var t,e;try{for(var i=n(r.listeners.cancel),o=i.next();!o.done;o=i.next()){var a=o.value;a.fn.call(a.caller,r.originalColor)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}r.hide()},this.isVisible=function(){return r.bodyElement.classList.contains("ea-picker-visible")},this.target=t,this.listeners={change:[],save:[],cancel:[]},this.init(e)}return t.prototype.init=function(t){var e=document.createElement("div");e.className="ea-color-picker",this.target.classList.add("ea-picker-target");var r=(1e4*Math.random()).toFixed(0),n=void 0===t.defaultColors||Array.isArray(t.defaultColors)&&t.defaultColors.length>0;e.innerHTML='<div class="ea-color-selection"><div class="ea-palette-container"><div style="position: relative;height: 100%;"><div class="ea-palette"></div></div><div id="palletePicker_'+r+'" class="ea-picker"></divid></div><div class="ea-selection-bottom"><div class="ea-color-sample"></div><div style="float: left;width:180px;"><div class="ea-color-chooser"><div id="colorPicker_'+r+'" class="ea-picker ea-slider-picker"></div><div id="colorSlider_'+r+'" class="ea-slider" tabindex="0" aria-label="hue selection slider" role="slider"></div></div><div class="ea-color-chooser"><div id="transpPicker_'+r+'" class="ea-picker ea-slider-picker"></div><div id="transpSlider_'+r+'" class="ea-slider ea-transparency" tabindex="0" aria-label="transparency selection slider" role="slider"></div></div></div></div>'+(n?'<div class="ea-swatches-panel"></div>':"")+'<div class="ea-picker-buttons"><button id="pickerOKBtn_'+r+'">OK</button><button id="pickerCancelBtn_'+r+'" style="margin-left: 20px;">Cancel</button></div></div>',this.hueValPicker=e.querySelector("#palletePicker_"+r),this.sampleDiv=e.querySelector("div.ea-color-sample"),this.colorPicker=e.querySelector("#colorPicker_"+r),this.transparencyPicker=e.querySelector("#transpPicker_"+r),g.on(this.colorPicker,["mousedown","touchstart"],this.onPickerDown),g.on(this.transparencyPicker,["mousedown","touchstart"],this.onPickerDown),g.on(e.querySelector("#transpSlider_"+r),["mousedown","mousemove","touchstart","touchmove"],this.transparencyEvt),g.on(e.querySelector("#colorSlider_"+r),["mousedown","mousemove"],this.transparencyEvt),g.on(e.querySelector("#pickerOKBtn_"+r),["click","touchstart"],this.onSave),g.on(e.querySelector("#pickerCancelBtn_"+r),["click","touchstart"],this.onCancel);var i=e.querySelector("div.ea-palette");if(g.on([i,this.hueValPicker],["mousedown","touchstart","mousemove","touchmove"],this.paletteClick),n){var o;o=Array.isArray(t.defaultColors)?t.defaultColors.slice(0,Math.min(14,t.defaultColors.length)):["#F44336","#E91E63F2","#9C27B0E5","#673AB7D8","#3F51B5CC","#2196F3BF","#03A9F4B2","#00BCD4B2","#009688BF","#4CAF50CC","#8BC34AD8","#CDDC39E5","#FFEB3BF2","#FFC107"],this.addSwatches(e.querySelector("div.ea-swatches-panel"),o)}this.paletteDiv=i,this.bodyElement=e,document.body.addEventListener("mousedown",this.hidePicker),g.on(this.target,["mousedown","touchstart"],this.changeVisibility),document.body.appendChild(e)},t.prototype.colorSlider=function(t){t<0?t=0:t>155&&(t=155);var e=t/155*360;this.hsvColor[0]=e,0==this.hsvColor[1]&&0==this.hsvColor[2]&&(this.hsvColor[1]=100,this.hsvColor[2]=100);var r=this.hsvToRgb(e,this.hsvColor[1],this.hsvColor[2]);this.setColorInternal("#"+this.getHex(r[0].toString(16))+this.getHex(r[1].toString(16))+this.getHex(r[2].toString(16))+this.getHex(this.alpha.toString(16)))},t.prototype.transparencySlider=function(t){t<0?t=0:t>155&&(t=155);var e=t/155;this.alpha=Math.round(255*e),this.transparencyPicker.style.left=t-6+"px";var r=this.hsvColor;this.paletteDiv.style.background="linear-gradient(to top, rgba(0, 0, 0, "+e+"), transparent),\n                        linear-gradient(to left, hsla("+r[0]+", 100%, 50%, "+e+"), rgba(255, 255, 255, "+e+"))";var n=this.alpha.toString(16);this.color.length>7?this.color=this.color.substr(0,7)+n:this.color+=n,this._setColor(this.color)},t.prototype.getHex=function(t){return 1==t.length?"0"+t:t},t.prototype.hsvToRgb=function(t,e,r){t=t/360*6,e/=100,r/=100;var n=Math.floor(t),i=t-n,o=r*(1-e),a=r*(1-i*e),l=r*(1-(1-i)*e),s=n%6,c=[r,a,o,o,l,r][s],d=[l,r,r,a,o,o][s],p=[o,o,l,r,r,a][s];return[Math.round(255*c),Math.round(255*d),Math.round(255*p)]},t.prototype.rgbToHsv=function(t,e,r){t/=255,e/=255,r/=255;var n,i,o=Math.min(t,e,r),a=Math.max(t,e,r),l=a-o,s=a;if(0===l)n=i=0;else{i=l/a;var c=((a-t)/6+l/2)/l,d=((a-e)/6+l/2)/l,p=((a-r)/6+l/2)/l;t===a?n=p-d:e===a?n=1/3+c-p:r===a&&(n=2/3+d-c),n<0?n+=1:n>1&&(n-=1)}return[Math.round(360*n),Math.round(100*i),Math.round(100*s)]},t.prototype.show=function(){var t=this.target.getBoundingClientRect(),e=this.bodyElement,r=function(){var n=e.getBoundingClientRect(),i=n.width;if(0==i)setTimeout(r,200);else{var o=window.innerWidth,a=window.innerHeight,l=t.left,s=t.top+t.height;t.left+i>o&&(l=Math.max(0,o-i)),s+n.height>a&&(s=Math.max(0,a-n.height)),e.style.left=l+"px",e.style.top=s+"px",e.style.opacity="1"}};r(),e.style.left=t.left+"px",e.style.top=t.top+t.height+"px",e.style.opacity="0.05",e.classList.add("ea-picker-visible")},t.prototype.hide=function(){this.bodyElement.classList.remove("ea-picker-visible")},t.prototype.getValidHexColor=function(t){if("#"==t.charAt(0))return 4==t.length?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:t;var e=document.createElement("canvas").getContext("2d");return e.fillStyle=t,e.fillStyle},t.prototype.setColor=function(t){this.originalColor=this.getValidHexColor(t),this.setColorInternal(this.getValidHexColor(t))},t.prototype.setColorInternal=function(t){var e=t.substr(1).match(/.{2}/g).map((function(t){return parseInt(t,16)})),r=this.paletteDiv,n=e[3]||255;this.color=t;var i=this.rgbToHsv(e[0],e[1],e[2]);this.hsvColor=i,this.alpha=n;var o=this.colorPicker,a=o.parentElement.querySelector("div.ea-slider").clientWidth||155;this.transparencyPicker.style.left=(n*a/255-6).toFixed(0)+"px",this.hueValPicker.style.left=(i[1]/100*(r.clientWidth||230)-9).toFixed(0)+"px",this.hueValPicker.style.top=((100-i[2])/100*(r.clientHeight||125)-9).toFixed(0)+"px",o.style.left=a*i[0]/360-6+"px";var l=(n/255).toFixed(2);r.style.background="linear-gradient(to top, rgba(0, 0, 0, "+l+"), transparent),\n                        linear-gradient(to left, hsla("+i[0]+", 100%, 50%, "+l+"), rgba(255, 255, 255, "+l+"))",this._setColor(t)},t.prototype.addSwatches=function(t,e){var r,i,o=[];try{for(var a=n(e),l=a.next();!l.done;l=a.next()){var s=l.value,c=document.createElement("div");c.style.backgroundColor=s,o.push(c),c.setAttribute("data-color",s),t.appendChild(c)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}g.on(o,["mousedown","touchstart"],this.swatchClick)},t}(),rt=function(t){function e(e,r){var n=t.call(this)||this;n.pickerColorChange=function(t){var e=n;e.drawStyle.color=t,e.sampleLine.style.backgroundColor=t,e.colorPickerDiv.style.backgroundColor=t},n.pickerColorSave=function(t){n.sampleLine.style.stroke=t,n.pickerColorChange(t)},n.pickerCancel=function(t){n.pickerColorChange(t),n.colorPickerDiv.style.backgroundColor=t},n.onOKBtnClick=function(){var t=n;t.callback&&t.callback(t.drawStyle),t.hide()},n.cancelBtnClick=function(){n.hide()},n.onLineStyleChange=function(t){var e="none",r="unset",o=n.sampleLine.style;switch(t){case i.DOTTED:var a=parseInt(o.strokeWidth,10);if(isNaN(a))return;e="1 "+(a*(a<7?2:1.5)).toString(),r="round";break;case i.DASHED:e="10%"}o.strokeDasharray=e,o.strokeLinecap=r,n.drawStyle.type=t},n.onLineWidthChange=function(t){var e=["1","2","3","5","7","10","12","15","20","25"];n.sampleLine.style.strokeWidth=e[t],n.drawStyle.width=parseInt(e[t],10),n.onLineStyleChange(n.drawStyle.type)},n.beginArrowChange=function(t){n.changeMarker(t,"marker-start"),n.drawStyle.startArrow=t},n.endArrowChange=function(t){n.changeMarker(t,"marker-end"),n.drawStyle.endArrow=t},n.hideDialog=function(e){var r=n;r.drawStyleDropDown.isOpen()||r.lineWidthDropDown.isOpen()||r.startArrowDropDown.isOpen()||r.endArrowDropDown.isOpen()||n.picker.isVisible()||t.prototype.hideDialog.call(n,e)};var o=n;o.config=e,o.picker=null,o.height=300,o.drawStyle={width:r?r.width:1,type:r?r.type:i.SOLID,color:r?r.color:"#000",startArrow:r?r.startArrow:0,endArrow:r?r.endArrow:0};var a=document,l=a.createElement("div"),s=a.createElement("button"),c=a.createElement("div"),d=a.createElement("button");c.className="body",l.appendChild(c),l.className=e.ui+"-dialog",c.style.height="230px";var p=a.createElement("label");p.className="label",p.innerHTML="Line Style",c.appendChild(p);var u=new tt(e,['<div style="height:1px;background:#000;margin-top:12px"></div>','<div style="height:1px;border-top:1px dotted #000;margin-top:12px"></div>','<div style="height:1px;border-top:1px dashed #000;margin-top:12px"></div>']);u.setSelectedIndex(r.type),u.onchange=o.onLineStyleChange,o.drawStyleDropDown=u,c.appendChild(u.getElement()),(p=a.createElement("label")).className="label",p.innerHTML="Width",c.appendChild(p);var h,g=[1,2,3,5,7,10,12,15,20,25],f=0,m=[],y=-1;for(f=0;f<g.length;f++)(h=g[f])==r.width&&(y=f),m.push('<div style="height:'+h+"px;background:#000;margin-top:"+(25-h)/2+'px"></div>');var w=new tt(e,m);w.onchange=o.onLineWidthChange,c.appendChild(w.getElement()),o.lineWidthDropDown=w,n.arrowStyleDiv=a.createElement("div"),(p=a.createElement("label")).className="label",p.innerHTML="Arrow",n.arrowStyleDiv.appendChild(p);var b=new Array,x=new Array;for(b.push('<div class="arrow-style-none"></div>'),x.push('<div class="arrow-style-none"></div>'),f=0;f<6;f++)b.push('<div class="arrow-style arrow-style'+f+'"></div>'),x.push('<div class="arrow-style arrow-style-end'+f+'"></div>');var S=new tt(e,b,"arrow-style-dropdown"),E=new tt(e,x,"arrow-style-dropdown");o.arrowStyleDiv.appendChild(S.getElement()),o.arrowStyleDiv.appendChild(E.getElement()),S.onchange=o.beginArrowChange,E.onchange=o.endArrowChange,o.startArrowDropDown=S,o.endArrowDropDown=E,c.appendChild(o.arrowStyleDiv),(p=a.createElement("label")).className="label",p.innerHTML="Color",c.appendChild(p);var k=a.createElement("div");k.className="color-picker",c.appendChild(k),o.colorPickerDiv=k;var A=a.createElement("div");c.appendChild(A),A.className="sample",A.innerHTML='<svg width="200" height="80"><defs></defs><line x1="10" x2="190" y1="40" y2="40" stroke="black"/></svg>';var L=A.getElementsByTagName("defs")[0];for(f=0;f<6;f++){var C=v.createArrowMarker(e,f)[0];C.setAttribute("id","sampleMarker_"+(f+1)),C.style.stroke="#000",L.appendChild(C),f<2&&((C=v.createArrowMarker(e,f,null,!0)[0]).setAttribute("id","start_sampleMarker_"+(f+1)),C.style.stroke="#000",L.appendChild(C))}return o.sampleLine=A.getElementsByTagName("line")[0],n.addBaseButtons(l,s,d),s.addEventListener("click",o.onOKBtnClick),d.addEventListener("click",o.cancelBtnClick),o.container=l,o.onLineStyleChange(r.type),y>=0&&(w.setSelectedIndex(y),o.onLineWidthChange(y)),n}return r(e,t),e.prototype.show=function(e,r,i){var o,a;t.prototype.show.call(this,e,r,i);var l,s,c,d=this,p=-1,u=-1,h=d.config.drawStyle,g="",f=-1,m=-1,v=0;try{for(var y=n(r),w=y.next();!w.done;w=y.next()){(c=w.value)instanceof x&&v++;var b=c.getDrawStyle(),S=b.color;l=b.type,s=b.width,S!=g&&(g=""===g?S:"-1"),b.startArrow!=f&&(f=-1===f?b.startArrow:-2),b.endArrow!=m&&(m=-1===m?b.endArrow:-2),l!=p&&(p=-1==p?l:-2),s!=u&&(u=-1==u?s:-2)}}catch(t){o={error:t}}finally{try{w&&!w.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}p<0&&(p=h.type),u<0&&(u=h.width),f<0&&(m=0),m<0&&(m=0),d.drawStyleDropDown.setSelectedIndex(p);var E=[1,2,3,5,7,10,12,15,20,25].indexOf(u);if(E<0&&(E=0),d.lineWidthDropDown.setSelectedIndex(E),d.startArrowDropDown.setSelectedIndex(f),d.endArrowDropDown.setSelectedIndex(m),!d.picker){d.picker=new et(d.colorPickerDiv,d.config);var k=d.picker;k.on("change",d.pickerColorChange,d),k.on("save",d.pickerColorSave,d),k.on("cancel",d.pickerCancel,d)}""!==g&&"-1"!=g||(g=h.color),d.picker.setColor(g);var A=v>0?"":"none";this.arrowStyleDiv.style.display=A,this.startArrowDropDown.getElement().style.display=A,this.endArrowDropDown.getElement().style.display=A},e.prototype.changeMarker=function(t,e){var r="none";t>0&&(r="url(#"+(1!=t&&2!=t||"marker-start"!=e?"":"start_")+"sampleMarker_"+t+")"),this.sampleLine.setAttribute(e,r)},e}(f),nt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path class="ea-button" d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"></path></svg>',it=function(t){function e(){var e=t.call(this)||this;return e.xtype=b.DRAW_PROPERTY,e.title="Line Style",e.iconSVG=nt,e}return r(e,t),e.prototype.invoke=function(t,e){this.drawDialog||(this.drawDialog=new rt(t,t.drawStyle)),this.drawDialog.show(this.element,e,(function(r){var i,o;t.drawStyle.width=r.width,t.drawStyle.type=r.type;try{for(var a=n(e),l=a.next();!l.done;l=a.next())l.value.setDrawStyle(r)}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}))},e}($),ot=function(t){function e(r,n){var i=t.call(this)||this;i.blurIndex=0,i.shadowIndex=0,i.pickerSave=function(t){var e=i;e.fillStyle.color=t,e.sampleDiv.style.backgroundColor=t},i.pickerCancel=function(t){i.pickerSave(t),i.colorPickerDiv.style.backgroundColor=t},i.pickerColorChange=function(t){i.colorPickerDiv.style.backgroundColor=t,i.fillStyle.color=t},i.onOKBtnClick=function(){var t=i,r=null,n=t.blurIndex,o=t.shadowIndex;if(n>0){var l="";n<e.BLUR_OPTIONS.length&&(l=e.BLUR_OPTIONS[n]),r=[{effectType:a.BLUR,index:n,value:l}]}if(o>0){var s="";o<e.SHADOW_OPTIONS.length&&(s=e.SHADOW_OPTIONS[o]),null==r&&(r=[]),r.push({effectType:a.SHADOW,index:o,value:s})}t.fillStyle.effects=r||null,t.fillStyle.opacity=parseInt(t.opacitySlider.value,10),t.callback&&t.callback(t.fillStyle),t.hide()},i.cancelBtnClick=function(){i.hide()},i.onFillStyleChange=function(t){i.sampleDiv.className="sample fill-pattern"+t,i.fillStyle.fillType=t},i.onEffectChange=function(t,e,r){var n=i;switch(r){case 0:n.blurIndex=t;break;case 1:n.shadowIndex=t}var o=n.getShadowFilter(n.shadowIndex)+n.getBlurFilter(n.blurIndex);""===o&&(o="none"),n.sampleDiv.style.filter=o},i.hideDialog=function(e){i.fillPatternDropDown.isOpen()||i.effectsDropDown.isOpen()||i.picker.isVisible()||t.prototype.hideDialog.call(i,e)};var o=i;o.config=r,o.picker=null,o.height=275,o.fillStyle={fillType:n?n.fillType:0,color:n?n.color:"#000",opacity:n?n.opacity:100,effects:n?n.effects:[]};var l=document,s=l.createElement("div"),c=l.createElement("button"),d=l.createElement("div"),p=l.createElement("button");d.className="body",s.appendChild(d),s.className=r.ui+"-dialog",d.style.height="180px";var u=l.createElement("label");u.className="label",u.innerHTML="Fill Pattern",o.fillPatternLabel=u,d.appendChild(u);var h,f=['<div style="height:20px;background:#000;"></div>'];for(h=1;h<10;h++)f.push('<div class="fill-pattern'+h+'" style="height:20px;"></div>');var m=new tt(r,f,null,"fill-value");m.setSelectedIndex(n.fillType),m.onchange=o.onFillStyleChange,d.appendChild(m.getElement()),o.fillPatternDropDown=m,(u=l.createElement("label")).className="label",u.innerHTML="Color",d.appendChild(u);var v=l.createElement("div");v.className="color-picker",d.appendChild(v),o.colorPickerDiv=v,(u=l.createElement("label")).className="label",u.innerHTML="Transparency",d.appendChild(u);var y=l.createElement("input");y.className="slider transparency",y.type="range",y.max="100",y.min="0",y.value=n.opacity.toString(),g.fixIOSSlider(y),o.opacitySlider=y,d.appendChild(y),(u=l.createElement("label")).className="label",u.innerHTML="Effects",d.appendChild(u);var w=["<div>Blur</div>",'<div class="blur-option blur-none">None<div></div></div>'],b=["1px","2px","5px","10px","20px","50px"],x=e.BLUR_OPTIONS,S=["<div>Shadow</div>","None"];for(h in b)w.push('<div class="blur-option">'+b[h]+'<div style="filter:blur('+x[h]+')"></div></div>');S=S.concat(e.SHADOW_OPTIONS);var E=new tt(r,[w,S]);E.setSelectedIndex(n.fillType),E.onchange=o.onEffectChange,o.effectsDropDown=E,d.appendChild(E.getElement());var k=l.createElement("div");return d.appendChild(k),k.className="sample",k.style.height="30px",o.sampleDiv=k,i.addBaseButtons(s,c,p),c.addEventListener("click",o.onOKBtnClick),p.addEventListener("click",o.cancelBtnClick),o.container=s,i}return r(e,t),e.prototype.show=function(e,r,i){var o,l,s,c;t.prototype.show.call(this,e,r,i);var d,p,u,h,g,f=this,m=-1,v=f.config.fillStyle,y="",w=-1,b=-1,x=-1,S=0;try{for(var E=n(r),k=E.next();!k.done;k=E.next()){(g=k.value)instanceof P&&S++,p=(d=g.getFillStyle()).fillType;var A=d.color,L=d.opacity;if(p!=m&&(m=-1===m?p:-2),L!=w&&(w=-1===w?L:-2),A!=y&&(y=""===y?A:"-1"),u=-1,h=-1,d.effects)try{for(var C=(s=void 0,n(d.effects)),D=C.next();!D.done;D=C.next()){var M=D.value;switch(M.effectType){case a.BLUR:(u=M.index)!=b&&(b=-1===b?u:-2);break;case a.SHADOW:(h=M.index)!=x&&(x=-1===x?h:-2)}}}catch(t){s={error:t}}finally{try{D&&!D.done&&(c=C.return)&&c.call(C)}finally{if(s)throw s.error}}-1==u&&(b=-2),-1==h&&(x=-2)}}catch(t){o={error:t}}finally{try{k&&!k.done&&(l=E.return)&&l.call(E)}finally{if(o)throw o.error}}if(""!==y&&"-1"!=y||(y=v.color),!f.picker){f.picker=new et(f.colorPickerDiv,this.config);var T=f.picker;T.on("change",f.pickerColorChange,f),T.on("save",f.pickerSave,f),T.on("cancel",f.pickerCancel,f)}m<0&&(m=v.fillType),f.fillPatternDropDown.setSelectedIndex(m),w<0&&(w=v.opacity),b<0&&(b=0),x<0&&(x=0),f.effectsDropDown.setSelectedIndex(0,b),f.effectsDropDown.setSelectedIndex(1,x),f.opacitySlider.value=w.toString(),f.fillStyle.color=y,f.picker.setColor(y),f.colorPickerDiv.style.backgroundColor=y,f.sampleDiv.style.backgroundColor=y;var N=S==r.length?"none":"";f.fillPatternDropDown.getElement().style.display=N,f.fillPatternLabel.style.display=N},e.prototype.getBlurFilter=function(t){if(t<1)return"";var r=e.BLUR_OPTIONS;return t>r.length?"":" blur("+r[t-1]+")"},e.prototype.getShadowFilter=function(t){if(t<1)return"";var r=e.SHADOW_OPTIONS;if(t>r.length)return"";var n=r[t-1]+" ";return" drop-shadow("+n+n+n+")"},e.BLUR_OPTIONS=[".2px",".5px","1px","3px","5px","10px"],e.SHADOW_OPTIONS=["1px","2px","5px","10px","20px"],e}(f),at='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path class="ea-button" d="M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"></path></svg>',lt=function(t){function e(){var e=t.call(this)||this;return e.xtype=b.FILL_PROPERTY,e.title="Fill Style",e.iconSVG=at,e}return r(e,t),e.prototype.invoke=function(t,e){this.fillDialog||(this.fillDialog=new ot(t,t.fillStyle)),this.fillDialog.show(this.element,e,(function(t){var r,i;try{for(var o=n(e),a=o.next();!a.done;a=o.next())a.value.setFillStyle(t)}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}))},e}($),st=function(){},ct=function(t){function e(e,r){var n=t.call(this)||this;if(n.onOKBtnClick=function(){n.callback&&n.callback(n.font),n.hide()},n.cancelBtnClick=function(){n.hide()},n.onFontSizeChange=function(t,e){n.sampleTextDiv.style.fontSize=e+"px",n.font.size=e},n.onButtonClick=function(t){var e=t.target;"B"==e.innerText?(n.font.bold=!n.font.bold,n.sampleTextDiv.style.fontWeight=n.font.bold?"bold":"normal",n.font.bold?e.className="button":e.className="button hover-button"):(n.font.italic=!n.font.italic,n.sampleTextDiv.style.fontStyle=n.font.italic?"italic":"normal",n.font.italic?e.className="button":e.className="button hover-button")},n.onFontNameChange=function(t){var e=t.target,r=e.options[e.selectedIndex].value;n.font.name=r,n.sampleTextDiv.style.fontFamily=r},!r){r=new st;var i=window.getComputedStyle(document.body,null);r.name=i.getPropertyValue("font-family"),r.size=parseInt(i.getPropertyValue("font-size"),10),r.italic=!1}n.font=r;var o=document,a=o.createElement("div"),l=o.createElement("button"),s=o.createElement("div"),c=o.createElement("button"),d=parseInt(""+1e3*Math.random(),10);s.className="body",a.appendChild(s),a.className=e.ui+"-dialog";var p,u,h=o.createElement("select"),g=["Arial","Britannic Bold","Broadway","Calibri","Cambria","Centaur","Chiller","Consolas","Constantia","Courier New","Freestyle Script","Gabriola","Georgia","Harlow Solid Italic","Harrington","Informal Roman","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","Times New Roman","Segoe Script","Segoe UI","Sans-Serif","Tahoma","Verdana"];for(p in g)(u=o.createElement("option")).text=g[p],u.value=g[p],h.appendChild(u);h.id="fontDlgDropDown"+d,h.addEventListener("change",n.onFontNameChange,!1);var f=o.createElement("label"),m=o.createElement("div"),v=o.createElement("div");m.innerHTML="B",v.innerHTML="I",m.style.fontWeight="bold",v.style.fontStyle="italic",m.className="button hover-button",v.className="button hover-button",f.innerHTML="Font",f.htmlFor=h.id,s.appendChild(f),s.appendChild(h),s.appendChild(m),s.appendChild(v);var y=o.createElement("div");y.setAttribute("style","width:100%;height:30px;");var w=new tt(e,["4","5","6","10","11","14","16","18","20","24","28","32","36","45","50"]);w.setEditable(!0),w.onchange=n.onFontSizeChange,n.fontSizeDropDown=w,(f=o.createElement("label")).innerHTML="Size",y.appendChild(f);var b=w.getElement();b.style.marginLeft="11px",y.appendChild(b),s.appendChild(y),m.addEventListener("click",n.onButtonClick,!0),v.addEventListener("click",n.onButtonClick,!0);var x=o.createElement("div");x.className="btn-container",a.appendChild(x);var S=o.createElement("div");return s.appendChild(S),S.className="sample",S.innerHTML="Sample Text",n.sampleTextDiv=S,x.appendChild(l),x.appendChild(c),l.className="button",l.style.marginRight="20px",c.className="button",l.innerHTML="OK",c.innerHTML="Cancel",l.addEventListener("click",n.onOKBtnClick,!0),c.addEventListener("click",n.cancelBtnClick,!0),n.container=a,n}return r(e,t),e}(f),dt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path class="ea-button" d="M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"></path></svg>',pt=function(t){function e(){var e=t.call(this)||this;return e.xtype=b.FONT_PROPERTY,e.iconSVG=dt,e}return r(e,t),e.prototype.invoke=function(t,e){var r=this;r.fontDialog||(r.fontDialog=new ct(t)),r.fontDialog.show(r.element,e,(function(t){var i,o;r.font=t;try{for(var a=n(e),l=a.next();!l.done;l=a.next()){var s=l.value;s instanceof P&&s.setFont(t)}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}))},e}($),ut=function(t){function e(e){var r=t.call(this)||this;r.onBlurChange=function(t){r.sampleDiv.style.filter="blur("+parseFloat(r.blurSlider.value)/15+"px)"},r.onOKBtnClick=function(){var t=r;t.callback&&t.callback({blur:parseFloat(t.blurSlider.value)/15,opacity:parseFloat(t.transparencySlider.value)/100}),t.hide()},r.cancelBtnClick=function(){r.hide()},r.hideDialog=function(e){t.prototype.hideDialog.call(r,e)};var n=r,i=document,o=i.createElement("div"),a=i.createElement("button"),l=i.createElement("div"),s=i.createElement("button");n.height=150,l.className="body",o.appendChild(l),o.className=e.ui+"-dialog",l.style.height="80px";var c=i.createElement("label");c.className="label",c.innerHTML="Blur Radius",l.appendChild(c),r.blurLabel=c;var d=i.createElement("input");d.className="slider transparency",d.type="range",d.max="200",d.min="0",d.value="5",g.fixIOSSlider(d),n.blurSlider=d,d.addEventListener("change",n.onBlurChange),d.addEventListener("mousemove",n.onBlurChange),l.appendChild(d),(c=i.createElement("label")).className="label",c.innerHTML="Transparency",l.appendChild(c),n.transparencyLabel=c;var p=i.createElement("input");p.className="slider transparency",p.type="range",p.max="100",p.min="0",p.value="1",g.fixIOSSlider(p),n.transparencySlider=p,p.addEventListener("change",n.onBlurChange),p.addEventListener("mousemove",n.onBlurChange),l.appendChild(p);var u=i.createElement("div");l.appendChild(u),u.className="sample",u.style.height="30px";var h,f=v.getDefs(e).getElementsByTagName("pattern"),m=f.length;for(h=0;h<m;h++)if(0===f[h].id.indexOf("mainFillPattern")){u.style.backgroundImage='url("'+f[h].getElementsByTagName("image")[0].href.baseVal+'")';break}return r.sampleDiv=u,r.addBaseButtons(o,a,s),a.addEventListener("click",n.onOKBtnClick),s.addEventListener("click",n.cancelBtnClick),n.container=o,r}return r(e,t),e.prototype.show=function(e,r,i){var o,a;t.prototype.show.call(this,e,r,i);var l,s,c,d="-1",p="-1",u=!1;try{for(var h=n(r),f=h.next();!f.done;f=h.next()){if((c=f.value)instanceof J)l=c.getBlur();else{if(!(c instanceof W))continue;u=!0,l=c.getBlur(),(s=c.getOpacity())!=p&&(p="-1"==p?s:"-2")}l!=d&&(d="-1"==d?l:"-2")}}catch(t){o={error:t}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}var m=parseInt(d,10),v=parseFloat(p);d=m<0?"5":(15*m).toString(),p=v<0?"100":(100*v).toString();var y=this;g.isPhone(),y.transparencySlider.style.display=u?"block":"none",y.transparencyLabel.style.display=u?"block":"none",y.blurSlider.style.display=u?"none":"block",y.blurLabel.style.display=u?"none":"block",u&&(y.transparencySlider.value=p),y.blurSlider.value=d},e}(f),ht='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path class="ea-button" d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"></path></svg>',gt=function(t){function e(){var e=t.call(this)||this;return e.xtype=b.BLUR_PROPERTY,e.iconSVG=ht,e}return r(e,t),e.prototype.invoke=function(t,e){this.blurDialog||(this.blurDialog=new ut(t)),this.blurDialog.show(this.element,e,(function(t){var r,i,o=t.opacity,a=t.blur;try{for(var l=n(e),s=l.next();!s.done;s=l.next()){var c=s.value;c instanceof W?(c.setOpacity(o),c.setBlur(a)):c instanceof J&&c.setBlur(a)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}))},e}($),ft='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path class="ea-button" style="fill:url(#easyAnnotatorBtnGradient) #447799;" d="M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"></path></svg>',mt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path class="ea-button" d="M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"></path></svg>',vt=function(){function t(t,e){var r=this;if(this.selectedItems=new Array,this.annotators=new Array,this.isDragging=!1,this.pushedAnnotator=null,this.selectPos=new A(0,0),this.isImageElement=!0,this.imgLoaded=!1,this.imageLoaded=function(){r.imgLoaded=!0},this._showAnnotator=function(){r.init(),r.addListeners(),r.initToolbar()},this.docPress=function(t){var e=g.getEvent(t);if(e)for(var n=e.target,i=r.container,o=r.config.ui;n;){if(n==i)return;if(!(n instanceof Element))return;var a=n.classList;if(a.contains(o+"-dialog")||a.contains("ea-color-picker"))return;n=n.parentElement}r.deselectAll()},this.onResize=function(t){r.doLayout()},this.onMouseMove=function(t){var e,i,o,a;if((1&t.buttons)>0){var l=r,s=l.selectedItems,c=t.screenX-l.startX,d=t.screenY-l.startY;if(l.isDragging&&s.length)try{for(var p=n(l.selectedItems),u=p.next();!u.done;u=p.next())(S=u.value).moveBy(c,d,t)}catch(t){e={error:t}}finally{try{u&&!u.done&&(i=p.return)&&i.call(p)}finally{if(e)throw e.error}}else if(!l.pushedAnnotator){var h=l.selectRect,g=l.selectPos,f=l.svgContainer.getBoundingClientRect(),m=void 0,v=void 0,y=void 0,w=void 0;c=t.clientX-f.left-g.x,d=t.clientY-f.top-g.y,c<0?(m=g.x+c,y=-1*c,h.setAttribute("x",m.toString()),h.setAttribute("width",y.toString())):(m=h.x.baseVal.value,y=c,h.setAttribute("width",c.toString())),d<0?(v=g.y+d,w=-1*d,h.setAttribute("y",v.toString()),h.setAttribute("height",w.toString())):(v=h.y.baseVal.value,w=d,h.setAttribute("height",d.toString())),s.length=0;try{for(var b=n(l.annotators),x=b.next();!x.done;x=b.next()){var S;(S=x.value).intersects(m,v,y,w)?(S.setSelected(!0),s.push(S)):S.setSelected(!1)}}catch(t){o={error:t}}finally{try{x&&!x.done&&(a=b.return)&&a.call(b)}finally{if(o)throw o.error}}l.propertiesToolbar&&l.propertiesToolbar.setSelectedItems(s)}}},this.onMouseDown=function(t){var e,i,o=r,a=o.selectPos,l=o.selectRect,s=o.svgContainer.getBoundingClientRect(),c=!1,d=t.clientX-s.left,p=t.clientY-s.top;a.x=d,a.y=p,o.selectedItems.length=0;try{for(var u=n(o.annotators),h=u.next();!h.done;h=u.next()){var g=h.value;g.containsPoint(d,p)?(g.setSelected(!0),c=!0,o.selectedItems.push(g)):g.setSelected(!1)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}o.propertiesToolbar&&o.propertiesToolbar.setSelectedItems(o.selectedItems),c||o.pushedAnnotator||(l.setAttribute("x",a.x.toString()),l.setAttribute("y",a.y.toString()),l.setAttribute("width","0"),l.setAttribute("height","0"),o.svgContainer.appendChild(o.selectRect)),c&&o.startDrag(t.screenX,t.screenY),o.deselectAll()},this.onMouseUp=function(t){var e,i,o=r;o.isDragging=!1,o.selectRect.parentNode&&o.svgContainer.removeChild(o.selectRect);try{for(var a=n(o.selectedItems),l=a.next();!l.done;l=a.next())l.value.processMouseUp()}catch(t){e={error:t}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}},this.itemSelected=function(t){var e=r;e.deselectAll(),e.selectedItems.push(t),t.setSelected(!0),e.propertiesToolbar.setSelectedItems(e.selectedItems)},!t)throw new Error("Image element must be specified!");var o=this,a={};"string"==typeof t?(o.imageElement=new Image,o.imageElement.src=t,o.isImageElement=!1,o.imageElement.onload=o.imageLoaded):(o.imageElement=t,o.imgLoaded=o.imageElement.complete,o.imgLoaded||(o.imageElement.onload=o.imageLoaded)),e||(e={}),e.targetElement=e.targetElement||document.body,e.ui=e.ui||"default",e.font=e.font||{italic:!1,bold:!1},e.font.size=e.font.size||24,e.font.name=e.font.name||"Arial";var l=e.width,s=e.height;l||(l=o.imageElement.clientWidth||o.imageElement.width),s||(s=o.imageElement.clientHeight||o.imageElement.height);var c=l<600?1:2;e.drawStyle||(e.drawStyle={width:c,type:i.SOLID,startArrow:0,endArrow:0,color:"#000"}),e.fillStyle||(e.fillStyle={fillType:0,color:"#8EB9ED",opacity:100}),o.width=l,o.height=s,o.targetElement=e.targetElement,void 0===e.showToolbar&&(e.showToolbar=!0),void 0===e.showProperties&&(e.showProperties=!0);var d=e;for(var p in d)a[p]=d[p];a.annotatorIdx=v.getNextAnnotatorIdx(),o.config=a;var u=e.drawStyle,h=e.fillStyle;o.drawStyle={color:u.color,width:u.width,type:u.type,startArrow:u.startArrow,endArrow:u.endArrow},o.fillStyle={fillType:h.fillType,color:h.color,opacity:h.opacity}}return t.prototype.show=function(t,e){var r=this;r.imgLoaded?(r.completeCallback=t,void 0===e&&(e=2),r.exportType=e,!0===this.config.loadOnClick?g.on(this.imageElement,["click","touchstart"],r._showAnnotator):this._showAnnotator()):window.setTimeout((function(){r.show(t,e)}),500)},t.prototype.init=function(){var t=document,e=t.createElement("div"),r=t.createElementNS("http://www.w3.org/2000/svg","svg"),n=this,i=n.config,o=i.ui,a=n.imageElement;e.className=o+"-annotator-container",i.containerCls&&e.classList.add(i.containerCls),n.config.style&&e.setAttribute("style",n.config.style),n.selectRect=t.createElementNS("http://www.w3.org/2000/svg","rect"),n.selectRect.setAttribute("class",o+"-annotator-select-rect"),0!=n.width&&0!=n.height||(n.width=a.clientWidth||a.width,n.height=a.clientHeight||a.height),i.sizePercentage=Math.max(.25,Math.min(1,n.width/800));var l=n.width.toString(),s=n.height.toString();r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1"),r.setAttribute("width",l),r.setAttribute("height",s),r.setAttribute("viewBox","0 0 "+l+" "+s);var c=a.getBoundingClientRect(),d=n.targetElement.parentElement.getBoundingClientRect();e.appendChild(r),n.isImageElement||(e.style.position="unset"),n.container=e,n.svgContainer=r,n.targetElement.appendChild(e);var p=i.x,u=i.y;null==p&&(p=c.left-d.left+window.scrollX),null==u&&(u=c.top-window.scrollY),e.style.top=u+"px",e.style.left=p+"px",e.style.width=l+"px",e.style.height=s+"px",n.defs=t.createElementNS("http://www.w3.org/2000/svg","defs");var h=t.createElementNS("http://www.w3.org/2000/svg","pattern");h.setAttribute("width",l),h.setAttribute("height",s),h.setAttribute("patternUnits","userSpaceOnUse");var f=n.config.annotatorIdx;r.id="easyAnnotatorSVGContainer"+f,h.setAttribute("id","mainFillPattern"+f),h.innerHTML='<image preserveAspectRatio="none" width="'+l+'" height="'+s+'" xlink:href="'+n.imageElement.src+'"/>',n.defs.appendChild(h),r.appendChild(n.defs),n.imagePattern=h;var m=t.createElementNS("http://www.w3.org/2000/svg","rect");if(m.setAttribute("width","100%"),m.setAttribute("height","100%"),m.setAttribute("fill","url(#mainFillPattern"+f+")"),r.appendChild(m),n.rectSVGElement=m,n.initGradients(e),window.addEventListener("resize",n.onResize),n.isImageElement){var v=n.config.hideElement;(v||void 0===v)&&(n.imageElement.style.visibility="hidden")}g.on(document,["click","touchstart"],this.docPress)},t.prototype.initGradients=function(t){var e=document.getElementById("easyAnnotationGradientSVG");e||((e=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("id","easyAnnotationGradientSVG"),e.setAttribute("style","width:0;height:0;position:absolute;"),e.setAttribute("aria-hidden","true"),e.setAttribute("focusable","false"),e.innerHTML='<linearGradient class="'+this.config.ui+'-btn-gradient" id="easyAnnotatorBtnGradient" x2="1" y2="1">                    <stop offset="0%" stop-color="var(--color-stop-1)" />                    <stop offset="50%" stop-color="var(--color-stop-2)" />                    <stop offset="100%" stop-color="var(--color-stop-3)" />                </linearGradient>',t.appendChild(e))},t.prototype.addListeners=function(){var t=this.svgContainer;t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp)},t.prototype.startDrag=function(t,e){this.startX=t,this.startY=e,this.isDragging=!0},t.prototype.doLayout=function(){var t,e=this,r=e.isImageElement?e.imageElement.getBoundingClientRect():e.container.getBoundingClientRect(),n=(e.width,0),i=0,o=0,a=window.scrollX,l=window.scrollY,s=r.top+l,c=r.left+a,d=0,p=e.targetElement.getBoundingClientRect(),u=e.targetElement==document.body;u||(s-=p.top+l,c-=p.left+a),e.toolbar&&(i=e.toolbar.getContainer().childNodes.length),e.propertiesToolbar&&(o=e.propertiesToolbar.getContainer().childNodes.length,d=(v=(b=e.propertiesToolbar.getContainer()).getBoundingClientRect()).height,b.style.top=s-v.height+"px",b.style.left=c+"px");var h=e.width-20,g=h/(i+o);if(t=o*(g=Math.min(30,Math.max(24,g))),(n=i*g)>0){var f=h-t;n>f&&(n=f);var m=e.toolbar.getContainer();m.style.width=n+"px";var v=m.getBoundingClientRect();0==d&&(d=v.height),m.style.top=s-v.height+"px",m.style.left=r.right-(u?0:p.left)-v.width+"px",e.toolbar.doLayout();for(var y=m.firstChild,w=100/m.childNodes.length;y;)y.style.width=w+"%",y=y.nextSibling}if(t>0){var b;(b=e.propertiesToolbar.getContainer()).style.width=t+"px",y=b.firstChild,w=void 0;for(var x=0;y;)y.className.indexOf("-toolbar-item")>0&&x++,y=y.nextSibling;for(w=100/x,y=b.firstChild;y;)y.className.indexOf("-toolbar-item")>0&&(y.style.width=w+"%"),y=y.nextSibling}e.container.style.top=s+"px",e.container.style.left=c+"px"},t.prototype.initToolbar=function(){var t=this,e=t.config,r=e.showToolbar,n=e.showProperties,i=e.toolbarItems;if(r){if(null==i)i=[{itemId:"delete",iconSVG:ft,title:"Delete selected or all elements"},new G,new E,new V,new N,new R,new X,new U,new q,new D(t.config),{itemId:"save",iconSVG:mt,title:"Save changes and close annotator"}];else for(var o in i){var a=i[o],l=a.xtype;if(l)switch(l){case"delete":i[o].itemId="delete",a.iconSVG||(a.iconSVG=ft);break;case"text":i[o]=new G;break;case"line":i[o]=new E;break;case"arrow":i[o]=new V;break;case"ellipse":i[o]=new N;break;case"rect":i[o]=new R;break;case"callout":i[o]=new X;break;case"image":i[o]=new U;break;case"blur":i[o]=new q;break;case"free-draw":i[o]=new D(t.config);break;case"save":a.iconSVG||(a.iconSVG=mt)}}t.toolbar=new m(t.config,i,t.toolbarItemClickHandler,t)}if(n){var s=new K(t.config,[new it,new lt,new pt,new gt],t);s.setSelectedItems(t.selectedItems),t.propertiesToolbar=s}t.doLayout()},t.prototype.toolbarItemClickHandler=function(t,e){var r=this;if(r.toolbar.deselectAll(e),e instanceof s){var n=e,i=n.createAnnotator(r.config,r);if(null==i)return r.pushedAnnotator=null,void r.disableListeners(!1);i.moveBy((r.width-i.getWidth())/2,(r.height-i.getHeight())/2,null),r._addElement(i,r.drawStyle,r.fillStyle),r.deselectAll(),i.setSelected(!0),r.selectedItems.push(i),r.propertiesToolbar.setSelectedItems(r.selectedItems);var o=!!r.pushedAnnotator;n instanceof c?r.pushedAnnotator=i:r.pushedAnnotator&&(r.pushedAnnotator.stop(),r.pushedAnnotator=null),o!=!!r.pushedAnnotator&&(null!=r.pushedAnnotator?r.disableListeners(!0):r.disableListeners(!1))}else switch(r.disableListeners(!1),r.pushedAnnotator&&(r.pushedAnnotator.stop(),r.pushedAnnotator=null),e.itemId){case"delete":r.deleteSelection();break;case"save":r.save((function(t){r.completeCallback&&r.completeCallback(t)}),r.exportType)}},t.prototype.disableListeners=function(t){var e,r;try{for(var i=n(this.annotators),o=i.next();!o.done;o=i.next())o.value.getElement().style.pointerEvents=t?"none":"auto"}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype._addElement=function(t,e,r){var i,o,a=this;if(t.onSelectHandler=a.itemSelected,t.isOnTop()){var l=!1;try{for(var s=n(a.annotators),c=s.next();!c.done;c=s.next()){var d=c.value;if(!d.isOnTop()){a.svgContainer.insertBefore(t.getElement(),d.getElement()),l=!0;break}}}catch(t){i={error:t}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}l||a.svgContainer.appendChild(t.getElement())}else a.svgContainer.appendChild(t.getElement());e&&t.setDrawStyle(e),r&&t.setFillStyle(r),t instanceof P&&t.setFont(a.config.font),a.annotators.push(t)},t.prototype.addElement=function(t){this._addElement(t)},t.prototype.selectAll=function(){for(var t in this.selectedItems.length=0,this.annotators){var e=this.annotators[t];e.setSelected(!0),this.selectedItems.push(e)}this.propertiesToolbar.setSelectedItems(this.selectedItems)},t.prototype.deselectAll=function(){var t,e,r=this.selectedItems;try{for(var i=n(r),o=i.next();!o.done;o=i.next())o.value.setSelected(!1)}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}r.length=0,this.propertiesToolbar.setSelectedItems(r)},t.prototype.deleteSelection=function(){var t,e,r,i=this,o=i.annotators,a=[],l=i.selectedItems,s=i.svgContainer;if(0==i.selectedItems.length)i.clear();else{try{for(var c=n(o),d=c.next();!d.done;d=c.next())r=d.value,l.indexOf(r)>=0?(r.clean(),s.removeChild(r.getElement())):a.push(r)}catch(e){t={error:e}}finally{try{d&&!d.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}i.annotators=a,i.selectedItems.length=0,i.propertiesToolbar.setSelectedItems(i.selectedItems)}},t.prototype.clear=function(){var t=this,e=t.svgContainer;t.selectedItems.length=0,t.annotators.length=0;var r,n,i=e.children,o=i.length,a=t.rectSVGElement,l=t.defs;for(r=o-1;r>=0;r--)(n=i[r])!=a&&n!=l&&e.removeChild(n);for(var s=l.lastChild,c=t.imagePattern;s&&s!=c;)l.removeChild(s),s=l.lastChild},t.prototype.close=function(){},t.prototype.save=function(t,e){switch(this.deselectAll(),void 0===e&&(e=2),e){case 0:t(this.saveAsXML());break;case 1:t(this.saveAsJSON());break;case 3:t(this.saveAsSVG());break;default:this.saveAsPNG(t)}},t.prototype.loadXML=function(t){var e=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("main");if(!e)throw"Invalid XML!";for(var r=e[0].firstChild,n=[this.config,this];r;){var i=w.create(r.nodeName,n);i.fromXML(r),i.setSelected(!1),this._addElement(i,null,null),i instanceof k&&i.stop(),r=r.nextSibling}},t.prototype.doLoadJSON=function(t){var e,r,i=t.data,o=[this.config,this];if(i)try{for(var a=n(i),l=a.next();!l.done;l=a.next()){var s=l.value;if(s.xtype){var c=w.create(s.xtype,o);c.fromJSON(s),c.setSelected(!1),this._addElement(c,null,null),c instanceof k&&c.stop()}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}},t.prototype.loadJSON=function(t){var e=JSON.parse(t),r=this,n=function(){r.imgLoaded?r.doLoadJSON(e):window.setTimeout(n,500)};if(!e||!e.v)throw"Invalid JSON Object!";n()},t.prototype.saveAsXML=function(){var t,e,r=document.implementation.createDocument(null,"ea",null),i=r.createElementNS(null,"main");r.documentElement.appendChild(i),i.setAttribute("v","1.0");try{for(var o=n(this.annotators),a=o.next();!a.done;a=o.next()){var l=a.value.toXML();l&&i.appendChild(l)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return(new XMLSerializer).serializeToString(r)},t.prototype.saveAsJSON=function(){var t,e,r=[];try{for(var i=n(this.annotators),o=i.next();!o.done;o=i.next()){var a=o.value.toJSON();r.push(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}var l={v:"1.0",data:r};return JSON.stringify(l)},t.prototype.saveAsPNG=function(t){g.exportToPNG(this.imageElement,this.svgContainer,t)},t.prototype.saveAsSVG=function(){return this.svgContainer.outerHTML},t.prototype.getSVGContainer=function(){return this.svgContainer},t.prototype.getSelectedItems=function(){return this.selectedItems},t}();!function(t,e){void 0===e&&(e={});var r=e.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}(".default-btn-gradient{--color-stop-1:#56acb2;--color-stop-2:#2f80ed;--color-stop-3:#56aca2}.default-toolbar{position:absolute;height:30px;background-color:#d5d5d5;border-top-left-radius:5px;border-top-right-radius:5px;border:1px solid #101010;border-bottom:none}.default-toolbar-item{height:100%;text-align:center;cursor:pointer;position:relative;float:left;box-sizing:border-box}.default-toolbar-item-pressed{box-shadow:inset 0 0 10px #9a9a9a;-webkit-box-shadow:inset 0 0 10px #9a9a9a;-moz-box-shadow:inset 0 0 10px #9a9a9a;border-radius:5px;transition:border-radius .5s}.default-svg-text-element{cursor:default;-ms-user-select:none;-webkit-user-select:none;user-select:none}@media (hover:hover) and (pointer:fine){.default-toolbar-item:hover{background-color:#b0b0b0}}.default-toolbar-item svg{height:72%;margin-top:5px}.toolbar-url-icon{background-position:0 0;background-repeat:no-repeat;background-size:contain}.default-annotator-container{position:absolute;touch-action:none;-ms-touch-action:none}.default-annotator-select-rect{stroke-width:1px;stroke:#000;fill:transparent;stroke-dasharray:1}.annotator-back-line{stroke:transparent;stroke-width:25}.anotator-resize-element{stroke:#111;stroke-width:1;fill:#e8e8e8;opacity:.8}.default-annotator-line{stroke-width:2}.default-annotator-callout-shadow{fill:#000;fill-opacity:.5;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;filter:url(#calloutFilter258);transform:translate(5px,10px)}.default-annotator-callout{fill-rule:evenodd;stroke:#000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1}.default-annotator-text{stroke-width:1;stroke-dasharray:3,2;stroke-opacity:.5;fill:transparent;stroke:#000}.default-annotator-text span{cursor:default}.default-dialog{width:300px;height:200px;top:30px;border:1px solid #909090;position:absolute;display:none;background-color:#fbfbfb;box-shadow:2px 3px rgba(32,32,32,.12);border-radius:4px;z-index:12000}.default-dialog .body{width:300px;height:130px;padding:30px 10px 10px 20px;margin:0 auto}.default-dialog .btn-container .button{width:80px}.default-dialog .btn-container{width:100%;height:30px;text-align:center}.default-dialog .body *{float:left}.default-dialog .body select{margin-left:10px}.default-dialog .body .sample,.default-dialog div.button{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none;-ms-user-select:none;user-select:none}.default-dialog .body .sample{border:1px dotted #a0a0a0;padding:0 20px;margin-top:10px;margin-bottom:7px;width:220px;text-align:center;max-height:80px;overflow:hidden}.default-dialog div.button{float:left;width:20px;height:20px;border:1px solid #d9d9d9;text-align:center;border-radius:3px;margin-left:5px;cursor:default}.default-dialog div.hover-button:hover{background-color:#e1e1e1}.default-dialog div.press-button{background-color:#d0d0d0}.default-dialog .label{margin-right:5px;padding-top:5px;clear:left;width:110px;touch-action:none;-ms-touch-action:none;-ms-user-select:none;-o-user-select:none;-webkit-user-select:none;user-select:none;font-family:Poppins,sans-serif;font-size:14px;color:#666}.default-dialog .slider{-webkit-appearance:none;appearance:none;width:150px;height:7px;background:#d3d3d3;outline:none;opacity:.7;-webkit-transition:.2s;transition:opacity .2s;margin:15px 0 15px 90px}.default-dialog .transparency{background:linear-gradient(90deg,transparent,#000),url('data:image/svg+xml;utf8, <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2 2\"><path fill=\"white\" d=\"M1,0H2V1H1V0ZM0,1H1V2H0V1Z\"/><path fill=\"gray\" d=\"M0,0H1V1H0V0ZM1,1H2V2H1V1Z\"/></svg>');margin-left:0!important}.default-dialog .slider::-moz-range-thumb,.default-dialog .slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;background:#c6c6c6;cursor:pointer;border-radius:10px}.default-dialog .slider:disabled{background-color:#eaeaea;cursor:default}.default-dialog .slider:disabled::-moz-range-thumb,.default-dialog .slider:disabled::-webkit-slider-thumb{background-color:#ececec;border-color:#d2d2d2;cursor:default}.arrow-style-dropdown,.arrow-style-dropdown .body{width:75px!important}.arrow-style-dropdown .value{width:53px!important}.default-drop-down{width:150px;height:25px;border:1px solid #c8c8c8;margin-top:3px}.default-drop-down .body{width:150px;height:25px;padding:0}.default-drop-down .value{width:126px;height:25px;border-right:1px solid #e8e8e8}.default-drop-down .arrow{width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #424242;margin-top:10px;margin-left:6px}.default-drop-down .right-arrow{border-color:transparent #464646;border-style:solid;border-width:5px 0 5px 5px;height:0;width:0;position:absolute;margin:3px 0 0 130px!important}.subdrop-down{margin-left:139px!important;background-color:#fefefe;width:150px!important;margin-top:-20px!important;display:none;border:1px solid #c8c8c8;overflow:hidden}.subdrop-down .option>div:not(.checked){margin-left:0!important;float:left!important;margin-top:5px!important}.blur-option{width:100px}.blur-option div{background-repeat:no-repeat;background-image:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><path fill='black' d='M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z'></path></svg>\");width:20px;height:20px;float:right!important;margin-right:10px}.subdrop-down .option{padding-left:3px}.option .checked{background:url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\"><path d=\"M8.51 15.36l5.48 5.47 9.5-9.5\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" stroke=\"%23000\"/></svg>');background-size:18px 18px;background-position:-20px -18px;width:18px!important;height:18px;float:right!important}.default-drop-down .options-container{width:100%;display:none;border:1px solid #e0e0e0;margin-left:-1px;padding-right:1px;background:#fff;position:relative;z-index:10000}.default-drop-down .options-container .option{height:25px;width:100%;border:1px solid transparent;cursor:default}.default-drop-down .options-container .option:hover{border:1px solid #e0e0e0;background-color:#f5f5f5}.default-drop-down .options-container .option>*{margin:3px auto;float:none;width:85%}.default-drop-down .options-container .option>.padding{width:10px}.default-drop-down .value *{width:90%;margin:5px auto;float:none}.default-dialog .body .color-picker{width:150px;height:25px;border:1px solid #e0e0e0;margin-top:5px}.fill-pattern1{background-image:url(\"data:image/svg+xml;utf8,<svg width='12px' height='20px' viewBox='0 0 12 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><line stroke='black' x1='0' y1='20' x2='12' y2='0'/></svg>\")}.fill-pattern2{background-image:url(\"data:image/svg+xml;utf8,<svg width='12px' height='20px' viewBox='0 0 12 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><line stroke='black' x1='0' y1='0' x2='12' y2='20'/></svg>\")}.fill-pattern3{background-image:url(\"data:image/svg+xml;utf8,<svg width='12px' height='20px' viewBox='0 0 12 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><line stroke='black' x1='6' y1='0' x2='6' y2='20'/></svg>\")}.fill-pattern4{background-image:url(\"data:image/svg+xml;utf8,<svg width='12px' height='20px' viewBox='0 0 12 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><line stroke='black' x1='0' y1='5' x2='12' y2='5'/><line stroke='black' x1='0' y1='15' x2='12' y2='15'/></svg>\")}.fill-pattern5{background-image:url(\"data:image/svg+xml;utf8,<svg width='12px' height='20px' viewBox='0 0 12 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><line stroke='black' x1='6' y1='0' x2='6' y2='20'/><line stroke='black' x1='0' y1='5' x2='12' y2='5'/><line stroke='black' x1='0' y1='15' x2='12' y2='15'/></svg>\")}.fill-pattern6{background-image:url(\"data:image/svg+xml;utf8,<svg width='12px' height='20px' viewBox='0 0 12 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><line stroke='black' x1='0' y1='20' x2='12' y2='0'/><line stroke='black' x1='0' y1='0' x2='12' y2='20'/></svg>\")}.fill-pattern7{background-image:url(\"data:image/svg+xml;utf8,<svg width='10px' height='10px' viewBox='0 0 12 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 20 L12 0 M0 0 L12 20'></path></svg>\")}.fill-pattern8{background-image:url(\"data:image/svg+xml;utf8,<svg width='10px' height='10px' viewBox='0 0 10 10' version='1.1' xmlns='http://www.w3.org/2000/svg'><rect width='10' height='10' fill='transparent'/><circle cx='4' cy='4' r='1' fill='black'/></svg>\")}.fill-pattern9{background-image:url(\"data:image/svg+xml;utf8,<svg width='10px' height='10px' viewBox='0 0 10 10' version='1.1' xmlns='http://www.w3.org/2000/svg'><rect width='10' height='10' fill='transparent'/><circle cx='3' cy='3' r='2' fill='black'/></svg>\")}.arrow-style{height:20px;background-repeat:no-repeat}.arrow-style0{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M39 8 L3 8 M3 5 L1 8 L3 11 z'/></svg>\")}.arrow-style1{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 8 L5 5 M0 8 L5 11 M0 8 L40 8'/></svg>\")}.arrow-style2{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 6 L4 6 L4 10 L0 10 z M4 8 L39 8'/></svg>\")}.arrow-style3{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M1 8 L4 5 L7 8 L4 11 z M1 8 L41 8'/></svg>\")}.arrow-style4{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M2 5 A 3 3 0 1 0 5 5 z M0 8 L39 8'/></svg>\")}.arrow-style5{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M1 5 L1 11 M0 8 L40 8'/></svg>\")}.arrow-style-end0{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 8 L36 8 M36 5 L39 8 L36 11 z'/></svg>\")}.arrow-style-end1{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 8 L40 8 M40 8 L35 5 M40 8 L35 11'/></svg>\")}.arrow-style-end2{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 8 L35 8 M35 5 M0 8 L35 8 M35 6 L39 6 L39 10 L 35 10 z'/></svg>\")}.arrow-style-end3{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 8 L35 8 M35 8 L38 5 L41 8 L 38 11 z'/></svg>\")}.arrow-style-end4{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 8 L37 8 M37 5 M0 8 L37 8 M37 5 A 3 3 0 1 0 39 5 z'/></svg>\")}.arrow-style-end5{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 8 L40 8 M40 5 L40 11'/></svg>\")}.arrow-style-none{background-color:#000;width:39px!important;margin-left:5px!important;margin-top:12px!important;height:2px!important}.arrow-no-fill{fill:transparent!important}.arrow-no-stroke{stroke:none!important}.fill-value div{margin-top:3px!important}.image-uploader{font-size:1000px;opacity:0}.image-uploader-text{width:100%;height:100%;position:absolute;text-align:center;font-size:calc((75vw - 4.5rem)/14)}.btn-disabled svg *{fill:#909090!important;cursor:default!important}.btn-disabled:hover{background:transparent!important}.btn-disabled{cursor:default!important}.shake{animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;transform:translateZ(0);backface-visibility:hidden;perspective:1000px;stroke:red!important}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}.default-drop-down .value input{width:97%;margin-top:0;height:23px;border:none;padding-left:3px}.default-text-sel-rect{fill:transparent;stroke:#000;stroke-width:1;stroke-dasharray:1;display:none}.default-toolbar-more-btn{background-image:url(\"data:image/svg+xml;utf8,<svg width='10px' height='10px' viewBox='0 0 10 10' version='1.1' xmlns='http://www.w3.org/2000/svg'><circle stroke='black' cx='5' cy='5' r='5'/></svg>\")}.default-toolbar-submenu{position:absolute;width:28px;background-color:#d5d5d5;margin-top:30px;border:1px solid #101010;border-top:none;right:-1px}.default-toolbar-submenu-item{height:30px;margin-left:3px}.default-text-ann-btn-container{width:100%;height:40px;background:hsla(0,0%,51.8%,.75);background:linear-gradient(180deg,hsla(0,0%,51.8%,.75),#8c8c8c);margin-top:-2px}.default-text-ann-btn-container div{width:28px;height:26px;float:right;margin:4px 2px 2px;border-radius:3px;cursor:pointer;background-image:-moz-linear-gradient(top,#fff,hsla(0,0%,100%,0));background-image:linear-gradient(top,#fff,hsla(0,0%,100%,0));box-shadow:0 1px 0 rgba(0,0,0,.3),0 2px 2px -1px rgba(0,0,0,.5),inset 0 1px 0 hsla(0,0%,100%,.3)}.mobile-dropdown-container{position:absolute!important;top:0!important;left:0!important;width:100%!important;height:100%!important;z-index:1000000!important}.default-mobile-dropdown-container{background-color:#eaeaea}.default-mobile-dropdown-container .option{height:30px!important;border-bottom:1px solid #fff;margin-left:3px!important;padding:10px 20px 0 0}.mobile-dropdown-container .sub-item>div{float:left}.mobile-dropdown-container .sub-item>div.right-arrow{width:6px;height:6px;float:right;border:solid #a2a2a2;border-width:0 2px 2px 0;padding:3px;transform:rotate(-45deg);-webkit-transform:rotate(-45deg);margin:4px 10px 0 0}.mobile-sub-dropdown{width:100%!important;height:100%!important;background-color:#eaeaea}.mobile-sub-option{width:100%;height:40px;border-bottom:1px solid #fff}.mobile-hide-elem,.mobile-show-elem{-webkit-animation-name:show-elem;-webkit-animation-duration:.3s;animation-name:show-elem;animation-duration:.3s;display:block;left:100%;position:absolute;animation-fill-mode:forwards;margin-left:0!important;z-index:100;top:0;height:100%;margin-top:40px!important}@-webkit-keyframes show-elem{0%{left:100%}to{left:0}}@keyframes show-elem{0%{left:100%}to{left:0}}.mobile-hide-elem{animation-name:hide-elem;-webkit-animation-name:hide-elem;left:0}@-webkit-keyframes hide-elem{0%{left:0}to{left:100%}}@keyframes hide-elem{0%{left:0}to{left:100%}}.mobile-sub-option>div.padding{width:20px!important}.mobile-sub-option .checked{margin-right:23px}.default-mobile-buttons{width:100%;height:40px;background-color:#eaeaea;border-bottom:1px solid #bababa}.default-mobile-buttons .back-button{float:left;width:6px;height:6px;border:solid #a2a2a2;border-width:2px 0 0 2px;padding:3px;transform:rotate(-45deg);-webkit-transform:rotate(-45deg);margin:12px 0 0 25px}.default-mobile-buttons .close-button{float:right;width:40px;height:40px;margin:5px 10px 0 0}.default-mobile-buttons .close-button:after,.default-mobile-buttons .close-button:before{position:absolute;content:\" \";height:30px;width:2px;background-color:#989898;margin-left:15px}.default-mobile-buttons .close-button:before{transform:rotate(45deg)}.default-mobile-buttons .close-button:after{transform:rotate(-45deg)}.ea-mobile-dialog{position:fixed;top:0;left:0;border:none;width:100vw;height:100vh}.default-toolbar-item svg ellipse,.default-toolbar-item svg line,.default-toolbar-item svg path,.default-toolbar-item svg rect{fill:url(#easyAnnotatorBtnGradient) #479;stroke:url(#easyAnnotatorBtnGradient) #479}.ea-color-picker{opacity:0;display:none;z-index:100000;position:fixed;border-radius:3px;background-color:#fff;width:230px;height:280px;top:0;left:0;border:1px solid #e1e1e1}.ea-picker-visible{display:block;transition:opacity .3s;opacity:1}.ea-color-picker .ea-color-selection{width:100%}.ea-color-picker .ea-palette-container{width:100%;position:relative}.ea-color-picker .ea-palette{background:linear-gradient(0deg,#000,transparent) repeat scroll 0 0,transparent linear-gradient(270deg,#00ff81,#fff) repeat scroll 0 0;height:125px}.ea-color-picker .ea-palette:before,.ea-color-picker .ea-swatches-panel>div:before{position:absolute;content:\"\";top:0;left:0;width:100%;height:100%;background:url('data:image/svg+xml;utf8, <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2 2\"><path fill=\"white\" d=\"M1,0H2V1H1V0ZM0,1H1V2H0V1Z\"/><path fill=\"gray\" d=\"M0,0H1V1H0V0ZM1,1H2V2H1V1Z\"/></svg>');background-size:auto;background-size:.5em;border-radius:.15em;z-index:-1}.ea-color-picker .ea-picker{position:absolute;height:15px;width:15px;border:2px solid #fff;border-radius:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ea-color-picker .ea-selection-bottom{width:100%;height:60px}.ea-color-picker .ea-color-sample{float:left;width:2em;height:2em;border-radius:50em;margin:7px}.ea-color-picker .ea-color-chooser{height:7px;width:155px;float:left;margin:12px 0 0 10px;position:relative}.ea-color-picker .ea-slider{height:8px;background:linear-gradient(90deg,red,#ff0,#0f0,#0ff,#00f,#f0f,red);border-radius:3px}.ea-color-picker .ea-transparency{background:linear-gradient(90deg,transparent,#000),url('data:image/svg+xml;utf8, <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2 2\"><path fill=\"white\" d=\"M1,0H2V1H1V0ZM0,1H1V2H0V1Z\"/><path fill=\"gray\" d=\"M0,0H1V1H0V0ZM1,1H2V2H1V1Z\"/></svg>');background-size:auto,auto;background-size:100%,.25em}.ea-color-picker .ea-slider-picker{top:-4px;width:13px;height:13px;background-color:#fff;border:1px solid grey}.ea-picker-target{cursor:pointer}.ea-color-picker .ea-swatches-panel{width:100%;height:60px;padding-left:10px}.ea-color-picker .ea-swatches-panel>div{width:23px;height:23px;position:relative;float:left;margin:3px;cursor:pointer}.ea-color-picker .ea-swatches-panel>div:before{background-size:6px;border-radius:2px}.ea-color-picker .ea-picker-buttons{width:100%;text-align:center}.ea-color-picker .ea-picker-buttons button{width:80px}"),function(t){try{return new MouseEvent("test"),!1}catch(t){}var e=function(t){function e(){var e=t.call(this,"")||this;return e._bubles=!1,e._cancelable=!1,e}return r(e,t),e}(MouseEvent),n=function(r,n){n||(n=new e);var i=document.createEvent("MouseEvent");return i.initMouseEvent(r,n._bubles,n._cancelable,t,0,n.screenX||0,n.screenY||0,n.clientX||0,n.clientY||0,n.ctrlKey||!1,n.altKey||!1,n.shiftKey||!1,n.metaKey||!1,n.button||0,n.relatedTarget||null),i};n.prototype=Event.prototype,t.MouseEvent=n}(window),(j=t.ExportType||(t.ExportType={}))[j.XML=0]="XML",j[j.JSON=1]="JSON",j[j.IMAGE=2]="IMAGE",j[j.SVG=3]="SVG",t.AnnotatorContainer=vt,t.ArrowToolbarItem=V,t.BlurToolbarItem=q,t.CalloutToolbarItem=X,t.EllipseToolbarItem=N,t.FreeDrawToolbarItem=D,t.ImageToolbarItem=U,t.LineToolbarItem=E,t.RectToolbarItem=R,t.TextToolbarItem=G,Object.defineProperty(t,"__esModule",{value:!0})}));
